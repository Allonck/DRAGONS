

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Overview &mdash; Edge Detection 0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Edge Detection 0.1 documentation" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li><a href="index.html">Edge Detection 0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="overview">
<span id="ed-overview"></span><h1>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h1>
<div class="section" id="glossary">
<span id="ed-glossary"></span><h2>Glossary<a class="headerlink" href="#glossary" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt><strong>Edge</strong></dt>
<dd>The boundary between the image background and a slit.</dd>
<dt><strong>Slit</strong></dt>
<dd>Is the image area (mostly rectangular) with higher flux than the background and limited by two edges.</dd>
<dt><strong>Cut</strong></dt>
<dd>Is the rectangular area enclosing one spectrum. The class Cut defines the members and to extract one spectrum from the input image and generate a FITS extension in the output AstroData object</dd>
</dl>
</div>
<div class="section" id="how-to-locate-slit-edges">
<h2>How to locate slit edges<a class="headerlink" href="#how-to-locate-slit-edges" title="Permalink to this headline">¶</a></h2>
<p>The main goal when locating edges is to find a list of (x,y) pixel coordinates belonging to one edge along the slit boundary. These are the basic steps to achieve this.</p>
<ol class="arabic simple">
<li>Quality of the input image.</li>
</ol>
<blockquote>
<div><ul class="simple">
<li>The GMOS, GNIRS and F2 Flat images should be the results of combining several individual exposures to reduce noise and improve signal to noise.</li>
<li>The slits separation is crucial to determine a well defining edge showing no breakage along the dispersion axis. If two slit are as close as one pixel, chances are that the algorithm will fail to find the edge.</li>
</ul>
</div></blockquote>
<ol class="arabic simple" start="2">
<li>Prefiltering the input data is necessary in some cases to eliminate the background noise which produces to many unwanted short streak after the Sobel operator.</li>
</ol>
<blockquote>
<div><ul class="simple">
<li>For F2 data, a modified Canny algorithm is used to find edges. The prefiltering is a one sigma standard deviation of the Gauss filter.</li>
<li>For GNIRS data, the brightest slits (<em class="xref std std-ref">see picture</em>) are clipped to normalized the orders.</li>
<li>GMOS, slits are well iluminated and uniform with no need of filtering.</li>
</ul>
</div></blockquote>
<ol class="arabic simple" start="3">
<li>Use the Sobel operator from the ndimage package. It return the maximum gradient at positions where there is a change in intensity, such as boundaries between background and a slit. The picture below shows one row section of about 3 slits of a GMOS data file with the positive peak (entering the slit) and a negative peak (exiting the slit) corresponding to the Sobel operator output.</li>
</ol>
<img alt="_images/gmossobel2.png" src="_images/gmossobel2.png" />
<ol class="arabic simple" start="4">
<li>Create a binary image by putting the value one on all those points in the Sobel image that are greater than the standard deviation and zero if they are below. The sigma is calculated from the Sobel image. Notice that we are breaking the problem of finding the edges in two. One for positive peaks in the Sobel output image; i.e. the edges when entering the Slit and the negative peaks or the peaks obtained when exiting the slit. This method makes it easy to follow one edge in a crowded environment when we have two close slits separated by no more than 2 pixels for example.</li>
<li>Use the <em>label</em> function from the ndimage package to label each continue piece of edge. Different pieces have different labels.</li>
<li>Then we connect the labels one after another if their coordinates (x,y) fall in a continous edge.</li>
<li>Now we use the slit position and the slit width in the MDF table to compare with the (x,y) list found. Using the slit width we find the two slits edges.</li>
<li>With the (x,y) lists for each edge we fit a 2nd order polynomial use later in the process to cut a rectangle containing a slit.</li>
</ol>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Overview</a><ul>
<li><a class="reference internal" href="#glossary">Glossary</a></li>
<li><a class="reference internal" href="#how-to-locate-slit-edges">How to locate slit edges</a></li>
</ul>
</li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/overview.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li><a href="index.html">Edge Detection 0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2010, Gemini Observatory.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>