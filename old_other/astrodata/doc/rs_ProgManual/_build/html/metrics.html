<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>7. QA Metrics Database &mdash; RecipeSystem Programmer&#39;s Manual 0.9.0 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/todo-styles.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.9.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="RecipeSystem Programmer&#39;s Manual 0.9.0 documentation" href="index.html" />
    <link rel="next" title="RecipeSystem Design Notes" href="appendices/appendix_design.html" />
    <link rel="prev" title="6. Calibrations Association and Handling" href="calib.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="appendices/appendix_design.html" title="RecipeSystem Design Notes"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="calib.html" title="6. Calibrations Association and Handling"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">RecipeSystem Programmer&#39;s Manual 0.9.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="qa-metrics-database">
<h1>7. QA Metrics Database<a class="headerlink" href="#qa-metrics-database" title="Permalink to this headline">¶</a></h1>
<div class="section" id="event-manager-adcc-and-fitsstore">
<h2>7.1. Event Manager, ADCC, and Fitsstore<a class="headerlink" href="#event-manager-adcc-and-fitsstore" title="Permalink to this headline">¶</a></h2>
<p>QA metrics are reported to the fitsstore and stored locally
in the file .adcc/adcc_events.jsa using json.  The local storage
is not permanent and will be deleted with a superclean &#8211;safe call.</p>
<p>If access to fitsstore is available, the <tt class="docutils literal"><span class="pre">adcc</span></tt> will look at the
local storage only for recent events, results from older reductions
will come from the fitsstore.  If the local storage is empty, the
<tt class="docutils literal"><span class="pre">adcc</span></tt> will look to the fitsstore to retrieve whatever is available.</p>
<p>This system is currently used to report and retrieve QA metrics.
The nighttime GUI is using this event reporting as a QA metrics database.</p>
<p>Since a tool like the nighttime GUI might get its values either from
the local event database or from the fitsstore, through the adcc, the
content and structure of both sources must be identical.  The interface
must be respected.</p>
</div>
<div class="section" id="interface">
<h2>7.2. Interface<a class="headerlink" href="#interface" title="Permalink to this headline">¶</a></h2>
<div class="section" id="record-structure">
<h3>7.2.1. Record structure<a class="headerlink" href="#record-structure" title="Permalink to this headline">¶</a></h3>
<p>The record is a nested dictionary.</p>
<p>The first level of the structure can contain the keys:</p>
<ul class="simple">
<li><cite>bg</cite></li>
<li><cite>cc</cite></li>
<li><cite>iq</cite></li>
<li><cite>metadata</cite></li>
<li><cite>msgtype</cite></li>
<li><cite>timestamp</cite></li>
</ul>
<p>Each are defined in the next sections.  <cite>bg</cite>, <cite>cc</cite>, and <cite>iq</cite>
are optional and applicable only when the <cite>msgtype</cite> is <cite>&#8216;qametrics&#8217;</cite>.</p>
<p>The record will therefore look like this:</p>
<div class="highlight-python"><div class="highlight"><pre>{&#39;bg&#39; : the bg record,
 &#39;cc&#39; : the cc record,
 &#39;iq&#39; : the iq record,
 &#39;metadata : the metadata record,
 &#39;msgtype&#39; : the msgtype record,
 &#39;timestamp&#39; : the timestamp record
}
</pre></div>
</div>
</div>
<div class="section" id="bg">
<h3>7.2.2. bg<a class="headerlink" href="#bg" title="Permalink to this headline">¶</a></h3>
<p>This record contains information about a background (BG) measurement.</p>
<div class="section" id="example">
<h4>7.2.2.1. Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h4>
<p>A record for &#8216;bg&#8217; looks like this:</p>
<div class="highlight-python"><div class="highlight"><pre>&#39;bg&#39;: {&#39;band&#39;: &#39;50&#39;,
       &#39;brightness&#39;: 21.095,
       &#39;brightness_error&#39;: 0.017,
       &#39;comment&#39;: [],
       &#39;requested&#39;: 20
      }
</pre></div>
</div>
</div>
<div class="section" id="field-definitions">
<h4>7.2.2.2. Field Definitions<a class="headerlink" href="#field-definitions" title="Permalink to this headline">¶</a></h4>
<p>The fields for the <cite>bg</cite> record are:</p>
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="77%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td rowspan="3"><cite>band</cite></td>
<td>The measured BG band as a number.  QUESTION: can it be eg. 50,80??
?? Apparently fitsstore can return a &#8216;None&#8217; string.  Why not None?</td>
</tr>
<tr class="row-even"><td>Type: string</td>
</tr>
<tr class="row-odd"><td><p class="first">Example:</p>
<div class="last highlight-python"><div class="highlight"><pre>&#39;band&#39;: &#39;50&#39;
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td rowspan="3"><cite>brightness</cite></td>
<td>Measured background magnitude.</td>
</tr>
<tr class="row-odd"><td>Type: float</td>
</tr>
<tr class="row-even"><td><p class="first">Example:</p>
<div class="last highlight-python"><div class="highlight"><pre>&#39;brightness&#39;: 21.095
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td rowspan="3"><cite>brightness_error</cite></td>
<td>Error on the brightness measurement.</td>
</tr>
<tr class="row-even"><td>Type: float</td>
</tr>
<tr class="row-odd"><td><p class="first">Example:</p>
<div class="last highlight-python"><div class="highlight"><pre>&#39;brightness_error&#39;: 0.017
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td rowspan="3"><cite>comment</cite></td>
<td>Any comments associated with the measurement.</td>
</tr>
<tr class="row-odd"><td>Type: list of strings</td>
</tr>
<tr class="row-even"><td><p class="first">Examples:</p>
<div class="last highlight-python"><div class="highlight"><pre>&#39;comment&#39;: [&#39;WARNING: BG requirement not met at the 95%
           confidence level&#39;]
&#39;comment&#39;: []
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td rowspan="3"><cite>requested</cite></td>
<td>PI-requested BG constraint (Any == 100).</td>
</tr>
<tr class="row-even"><td>Type: integer</td>
</tr>
<tr class="row-odd"><td><p class="first">Example:</p>
<div class="last highlight-python"><div class="highlight"><pre>&#39;requested&#39;: 20
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="cc">
<h3>7.2.3. cc<a class="headerlink" href="#cc" title="Permalink to this headline">¶</a></h3>
<p>This API contains information about a cloud cover (CC) measurement.</p>
<div class="section" id="id1">
<h4>7.2.3.1. Example<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<p>A record for &#8216;cc&#8217; looks like this:</p>
<div class="highlight-python"><div class="highlight"><pre>&#39;cc&#39;: {&#39;band&#39;: &#39;50,70&#39;,
       &#39;comment&#39;: [&#39;WARNING: CC requirement not met at the 95% confidence level.&#39;],
       &#39;extinction&#39;: 0.09,
       &#39;extinction_error&#39;: 0.047,
       &#39;requested&#39;: 50,
       &#39;zeropoint&#39;: {&#39;e2v 10031--23-05,10031-01-03,10031-18-04&#39;: {&#39;error&#39;: 0.047,
                                                                 &#39;value&#39;: 28.28}}
      }
</pre></div>
</div>
</div>
<div class="section" id="field-defintions">
<h4>7.2.3.2. Field Defintions<a class="headerlink" href="#field-defintions" title="Permalink to this headline">¶</a></h4>
<p>The fields for the <cite>cc</cite> record are:</p>
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="77%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td rowspan="3">??? <cite>band</cite></td>
<td>The measured CC band as number or a comma-separated list of numbers
for when the measurement is in agreement within the error with
multiple bands.</td>
</tr>
<tr class="row-even"><td>Type: string</td>
</tr>
<tr class="row-odd"><td><p class="first">Example:</p>
<div class="last highlight-python"><div class="highlight"><pre>&#39;band&#39;: &#39;50,70&#39;
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td rowspan="3"><cite>comment</cite></td>
<td>Any comments associated with the measurement.</td>
</tr>
<tr class="row-odd"><td>Type: list of strings</td>
</tr>
<tr class="row-even"><td><p class="first">Examples:</p>
<div class="last highlight-python"><div class="highlight"><pre>&#39;comment&#39;: [&#39;WARNING: CC requirement not met at the 95%
           confidence level&#39;]
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td rowspan="3"><cite>extinction</cite></td>
<td>Atmospheric extinction measured in magnitudes.</td>
</tr>
<tr class="row-even"><td>Type: float</td>
</tr>
<tr class="row-odd"><td><p class="first">Example:</p>
<div class="last highlight-python"><div class="highlight"><pre>&#39;extinction&#39;: 0.09
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td rowspan="3"><cite>extinction_error</cite></td>
<td>Error measured on the atmospheric extinction, in magnitudes.</td>
</tr>
<tr class="row-odd"><td>Type: float</td>
</tr>
<tr class="row-even"><td><p class="first">Example:</p>
<div class="last highlight-python"><div class="highlight"><pre>&#39;extinction_error&#39;: 0.047
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td rowspan="3"><cite>requested</cite></td>
<td>PI-requested CC constraint (Any == 100).</td>
</tr>
<tr class="row-even"><td>Type: integer</td>
</tr>
<tr class="row-odd"><td><p class="first">Example:</p>
<div class="last highlight-python"><div class="highlight"><pre>&#39;requested&#39;: 50
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td rowspan="3"><cite>zeropoint</cite></td>
<td>Zeropoint calculated from <cite>extinction</cite> and a nominal zeropoint,
with error estimate, for a specific <cite>ampname</cite> (or group of arrays)</td>
</tr>
<tr class="row-odd"><td>Type: dictionary</td>
</tr>
<tr class="row-even"><td><p class="first">Examples:</p>
<div class="last highlight-python"><div class="highlight"><pre>&#39;zeropoint&#39;: {&#39;e2v 10031-23-05,10031-01-03,10031-18-04&#39;: \
                                               {&#39;error&#39;: 0.047,
                                                &#39;value&#39;: 28.28}
             }
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="iq">
<h3>7.2.4. iq<a class="headerlink" href="#iq" title="Permalink to this headline">¶</a></h3>
<p>This API contains information about a image quality (IQ) measurement.</p>
<div class="section" id="id2">
<h4>7.2.4.1. Example<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h4>
<p>A record for &#8216;iq&#8217; looks like this:</p>
<div class="highlight-python"><div class="highlight"><pre>&#39;iq&#39;: { &#39;adaptive_optics&#39;: True,
        &#39;ao_seeing&#39;: 1.224
        &#39;ao_seeing_zenith&#39;: 1.176,
        &#39;band&#39;: &#39;85&#39;,
        &#39;comment&#39;: [&#39;WARNING: AO observation. IQ band from estimated AO seeing.&#39;],
        &#39;delivered&#39;: 0.854,
        &#39;delivered_error&#39;: 0.022,
        &#39;ellip_error&#39;: 0.036,
        &#39;ellipticity&#39;: 0.017,
        &#39;requested&#39;: 70,
        &#39;strehl&#39;: 0.5,
        &#39;zenith&#39;: 0.595,
        &#39;zenith_error&#39;: 0.018
      }
</pre></div>
</div>
</div>
<div class="section" id="id3">
<h4>7.2.4.2. Field Defintions<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h4>
<p>The fields for the <cite>iq</cite> record are:</p>
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="77%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td rowspan="3"><dl class="first last docutils">
<dt><cite>adaptive_optics</cite></dt>
<dd>or is_ao ???</dd>
</dl>
</td>
<td>Identify the observation as an AO observation</td>
</tr>
<tr class="row-even"><td>Type: boolean</td>
</tr>
<tr class="row-odd"><td><p class="first">Example:</p>
<div class="last highlight-python"><div class="highlight"><pre>&#39;adaptive_optics&#39;: True
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td rowspan="3"><cite>ao_seeing</cite></td>
<td>Seeing reported by the AO system, as stored in the image header.
Optional, present only if <cite>adaptive_optics</cite> is <cite>True</cite>.</td>
</tr>
<tr class="row-odd"><td>Type: float</td>
</tr>
<tr class="row-even"><td><p class="first">Example:</p>
<div class="last highlight-python"><div class="highlight"><pre>&#39;ao_seeing&#39;: 1.224
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td rowspan="3"><dl class="first last docutils">
<dt><cite>ao_seeing_zenith</cite></dt>
<dd>???</dd>
</dl>
</td>
<td><cite>ao_seeing</cite> corrected to zenith.  Optional, present only if
<cite>adaptive_optics</cite> is <cite>True</cite>.</td>
</tr>
<tr class="row-even"><td>Type: float</td>
</tr>
<tr class="row-odd"><td><p class="first">Example:</p>
<div class="last highlight-python"><div class="highlight"><pre>&#39;ao_seeing_zenith&#39;: 1.176
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td rowspan="3"><cite>band</cite></td>
<td>The measured IQ band as number.  QUESTION: can it be a list??</td>
</tr>
<tr class="row-odd"><td>Type: string</td>
</tr>
<tr class="row-even"><td><p class="first">Example:</p>
<div class="last highlight-python"><div class="highlight"><pre>&#39;band&#39;: &#39;85&#39;
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td rowspan="3"><cite>comment</cite></td>
<td>Any comments associated with the measurement.</td>
</tr>
<tr class="row-even"><td>Type: list of strings</td>
</tr>
<tr class="row-odd"><td><p class="first">Example:</p>
<div class="last highlight-python"><div class="highlight"><pre>&#39;comment&#39;: [&#39;WARNING: AO observation. IQ band from estimated
             AO seeing.&#39;]
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td rowspan="3"><cite>delivered</cite></td>
<td>Measured seeing in arcseconds.  Can be None for AO observations.</td>
</tr>
<tr class="row-odd"><td>Type: float</td>
</tr>
<tr class="row-even"><td><p class="first">Examples:</p>
<div class="last highlight-python"><div class="highlight"><pre>&#39;delivered&#39;: None
&#39;delivered&#39;: 0.854
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td rowspan="3"><cite>delivered_error</cite></td>
<td>Error on the measurement of the delivered seeing.  Can be None
for AO observations.</td>
</tr>
<tr class="row-even"><td>Type: float</td>
</tr>
<tr class="row-odd"><td><p class="first">Example:</p>
<div class="last highlight-python"><div class="highlight"><pre>&#39;delivered_error&#39;: 0.022
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td rowspan="3"><cite>ellip_error</cite></td>
<td>Error on the ellipticity measurement.  Can be None for AO
observations.</td>
</tr>
<tr class="row-odd"><td>Type: float</td>
</tr>
<tr class="row-even"><td><p class="first">Example:</p>
<div class="last highlight-python"><div class="highlight"><pre>&#39;ellip_error&#39;: 0.036
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td rowspan="3"><cite>ellipticity</cite></td>
<td>Measured ellipticity of sources used to measured seeing.  Can be
None for AO observations.</td>
</tr>
<tr class="row-even"><td>Type: float</td>
</tr>
<tr class="row-odd"><td><p class="first">Example:</p>
<div class="last highlight-python"><div class="highlight"><pre>&#39;ellipticity&#39;: 0.017
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td rowspan="3"><cite>requested</cite></td>
<td>PI-requested IQ constraint (Any == 100).</td>
</tr>
<tr class="row-odd"><td>Type: integer</td>
</tr>
<tr class="row-even"><td><p class="first">Example:</p>
<div class="last highlight-python"><div class="highlight"><pre>&#39;requested&#39;: 70
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td rowspan="3"><dl class="first last docutils">
<dt><cite>strehl</cite></dt>
<dd>???</dd>
</dl>
</td>
<td>Measured Strehl ratio for AO observation.  Optional, present only
if <cite>adaptive_optics</cite> is <cite>True</cite>.</td>
</tr>
<tr class="row-even"><td>Type: float</td>
</tr>
<tr class="row-odd"><td><p class="first">Example:</p>
<div class="last highlight-python"><div class="highlight"><pre>&#39;strehl&#39;: 0.25
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td rowspan="3"><cite>zenith</cite></td>
<td><cite>delivered</cite> seeing corrected to zenith.  Can be None for AO
observations.</td>
</tr>
<tr class="row-odd"><td>Type: float</td>
</tr>
<tr class="row-even"><td><p class="first">Example:</p>
<div class="last highlight-python"><div class="highlight"><pre>&#39;zenith&#39;: 0.595
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td rowspan="3"><cite>zenith_error</cite></td>
<td>Error on the zenith-corrected seeing.  Can be None for AO
observations.</td>
</tr>
<tr class="row-even"><td>Type: float</td>
</tr>
<tr class="row-odd"><td><p class="first">Example:</p>
<div class="last highlight-python"><div class="highlight"><pre>&#39;zenith_error&#39;: 0.018
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="metadata">
<h3>7.2.5. metadata<a class="headerlink" href="#metadata" title="Permalink to this headline">¶</a></h3>
<p>This API contains information about the observation and its file.</p>
<div class="section" id="id4">
<h4>7.2.5.1. Example<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h4>
<p>A record for &#8216;metadata&#8217; looks like this:</p>
<div class="highlight-python"><div class="highlight"><pre>&#39;metadata&#39;: { &#39;airmass&#39;: 1.456,
              &#39;datalabel&#39;: &#39;GN-2015B-Q-26-27-001&#39;,
              &#39;filter&#39;: &#39;r&#39;,
              &#39;instrument&#39;: &#39;GMOS-N&#39;,
              &#39;local_time&#39;: &#39;03:07:55.200000&#39;,
              &#39;object&#39;: &#39;SDSSJ 1110+64&#39;,
              &#39;raw_filename&#39;: &#39;N20160108S0160.fits&#39;,
              &#39;types&#39;: [&#39;GEMINI_NORTH&#39;,
                        &#39;GMOS_N&#39;,
                        &#39;GMOS_IMAGE&#39;,
                        &#39;GEMINI&#39;,
                        &#39;SIDEREAL&#39;,
                        &#39;GMOS_NODANDSHUFFLE&#39;,
                        &#39;ACQUISITION&#39;,
                        &#39;IMAGE&#39;
                        &#39;GMOS&#39;,
                        &#39;GMOS_RAW&#39;,
                        &#39;RAW&#39;,
                        &#39;UNPREPARED&#39;],
              &#39;ut_time&#39;: &#39;2016-01-08 13:07:55.700000&#39;,
              &#39;waveband&#39;: &#39;r&#39;,
              &#39;wavelength&#39;: None
            }
</pre></div>
</div>
</div>
<div class="section" id="id5">
<h4>7.2.5.2. Field Defintions<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h4>
<p>The fields for the <cite>metadata</cite> record are:</p>
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="77%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td rowspan="3"><cite>airmass</cite></td>
<td>Airmass of the observation.</td>
</tr>
<tr class="row-even"><td>Type: float</td>
</tr>
<tr class="row-odd"><td><p class="first">Example:</p>
<div class="last highlight-python"><div class="highlight"><pre>&#39;airmass&#39;: 1.456
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td rowspan="3"><cite>datalabel</cite></td>
<td>Unique data identifier.</td>
</tr>
<tr class="row-odd"><td>Type: string</td>
</tr>
<tr class="row-even"><td><p class="first">Example:</p>
<div class="last highlight-python"><div class="highlight"><pre>&#39;datalabel&#39;: &#39;GN-2015B-Q-26-27-001&#39;
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td rowspan="3"><cite>filter</cite></td>
<td>Filter used for the observation.</td>
</tr>
<tr class="row-even"><td>Type: string</td>
</tr>
<tr class="row-odd"><td><p class="first">Example:</p>
<div class="last highlight-python"><div class="highlight"><pre>&#39;filter&#39;: &#39;r&#39;
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td rowspan="3"><cite>instrument</cite></td>
<td>Instrument used for the observation.</td>
</tr>
<tr class="row-odd"><td>Type: string</td>
</tr>
<tr class="row-even"><td><p class="first">Example:</p>
<div class="last highlight-python"><div class="highlight"><pre>&#39;instrument&#39;: &#39;GMOS-N&#39;
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td rowspan="3"><cite>local_time</cite></td>
<td>Local time of the observation. hh:mm:ss.ssssss</td>
</tr>
<tr class="row-even"><td>Type: string</td>
</tr>
<tr class="row-odd"><td><p class="first">Example:</p>
<div class="last highlight-python"><div class="highlight"><pre>&#39;local_time&#39;: &#39;03:07:55.200000&#39;
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td rowspan="3"><cite>object</cite></td>
<td>Name of the target.</td>
</tr>
<tr class="row-odd"><td>Type: string</td>
</tr>
<tr class="row-even"><td><p class="first">Example:</p>
<div class="last highlight-python"><div class="highlight"><pre>&#39;object&#39;: &#39;SDSSJ 1110+64&#39;
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td rowspan="3"><cite>raw_filename</cite></td>
<td>Name of the original, unprocessed observation file.</td>
</tr>
<tr class="row-even"><td>Type: string</td>
</tr>
<tr class="row-odd"><td><p class="first">Example:</p>
<div class="last highlight-python"><div class="highlight"><pre>&#39;raw_filename&#39;: &#39;N20160108S0160.fits&#39;
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td rowspan="3"><cite>types</cite></td>
<td>List of all applicable AstroDataTypes.</td>
</tr>
<tr class="row-odd"><td>Type: list of strings</td>
</tr>
<tr class="row-even"><td><p class="first">Example:</p>
<div class="last highlight-python"><div class="highlight"><pre>&#39;types&#39;: [&#39;GEMINI_NORTH&#39;, &#39;GMOS_N&#39;, &#39;GMOS_IMAGE&#39;, &#39;GEMINI&#39;,
          &#39;SIDEREAL&#39;, &#39;GMOS_NODANDSHUFFLE&#39;, &#39;ACQUISITION&#39;,
          &#39;IMAGE&#39;, &#39;GMOS&#39;, &#39;GMOS_RAW&#39;, &#39;RAW&#39;, &#39;UNPREPARED&#39;]
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td rowspan="3"><cite>ut_time</cite></td>
<td>UT time of the observation.
Full datetime string format: YYYY-MM-DD hh:mm:ss.ssssss</td>
</tr>
<tr class="row-even"><td>Type: string</td>
</tr>
<tr class="row-odd"><td><p class="first">Example:</p>
<div class="last highlight-python"><div class="highlight"><pre>&#39;ut_time&#39;: &#39;2016-01-08 13:07:55.700000&#39;
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td rowspan="3"><cite>waveband</cite></td>
<td>General wavelength band associated with the filter.</td>
</tr>
<tr class="row-odd"><td>Type: string</td>
</tr>
<tr class="row-even"><td><p class="first">Example:</p>
<div class="last highlight-python"><div class="highlight"><pre>&#39;waveband&#39;: &#39;r&#39;
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td rowspan="3"><cite>wavelength</cite></td>
<td>???</td>
</tr>
<tr class="row-even"><td>Type: string</td>
</tr>
<tr class="row-odd"><td><p class="first">Examples:</p>
<div class="last highlight-python"><div class="highlight"><pre>&#39;wavelength&#39;: None
&#39;wavelength&#39;: ???
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="msgtype">
<h3>7.2.6. msgtype<a class="headerlink" href="#msgtype" title="Permalink to this headline">¶</a></h3>
<p>This record defines the type of the event being reported. It is always stored as a <cite>string</cite>.
The valid events are:</p>
<dl class="docutils">
<dt><cite>qametric</cite></dt>
<dd>Applies to events reporting Quality Assessment metrics, like BG, CC, IQ.  Such
events must contain at least one of the <cite>bg</cite>, <cite>cc</cite>, or <cite>iq</cite> records.</dd>
</dl>
<p>Any others???</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre>&#39;msgtype&#39;: &#39;qametric&#39;
</pre></div>
</div>
</div>
<div class="section" id="timestamp">
<h3>7.2.7. timestamp<a class="headerlink" href="#timestamp" title="Permalink to this headline">¶</a></h3>
<p>This record contains the time of the event.  The value type is <cite>float</cite>.
The format is ???</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre>&#39;timestamp&#39;: 145225860.848475
</pre></div>
</div>
</div>
</div>
<div class="section" id="example-of-a-full-qa-metrics-record">
<h2>7.3. Example of a full QA metrics record<a class="headerlink" href="#example-of-a-full-qa-metrics-record" title="Permalink to this headline">¶</a></h2>
<p>Bringing it all together, here is an example of a complete QA metrics record.</p>
<div class="highlight-python"><div class="highlight"><pre>{&#39;bg&#39;: { &#39;band&#39;: &#39;50&#39;,
         &#39;brightness&#39;: 21.123,
         &#39;brightness_error&#39;: 0.018,
         &#39;comment&#39;: [],
         &#39;requested&#39;: 50},
 &#39;cc&#39;: { &#39;band&#39;: &#39;70&#39;,
         &#39;comment&#39;: [&#39;WARNING: CC requirement not met at the 95% confidence level&#39;],
         &#39;extinction&#39;: 0.086,
         &#39;extinction_error&#39;: 0.063,
         &#39;requested&#39;: 50,
         &#39;zeropoint&#39;: {&#39;e2v 10031-23-05,10031-01-03,10031-18-04&#39;: {&#39;error&#39;: 0.063,
                                                                   &#39;value&#39;: 28.284}}},
 &#39;iq&#39;: { &#39;adaptive_optics&#39;: False,
         &#39;band&#39;: &#39;85&#39;,
         &#39;comment&#39;: [&#39;IQ requirement not met&#39;],
         &#39;delivered&#39;: 0.935,
         &#39;delivered_error&#39;: 0.03,
         &#39;ellip_error&#39;: 0.035,
         &#39;ellipticity&#39;: 0.041,
         &#39;requested&#39;: 70,
         &#39;zenith&#39;: 0.873535978922236,
         &#39;zenith_error&#39;: 0.028027892371836446},
 &#39;metadata&#39;: { &#39;airmass&#39;: 1.12,
               &#39;datalabel&#39;: &#39;GN-2015B-FT-26-16-002&#39;,
               &#39;filter&#39;: &#39;r&#39;,
               &#39;instrument&#39;: &#39;GMOS-N&#39;,
               &#39;local_time&#39;: &#39;19:21:58.200000&#39;,
               &#39;object&#39;: &#39;L91&#39;,
               &#39;raw_filename&#39;: &#39;N20160108S0056.fits&#39;,
               &#39;types&#39;: [ &#39;GEMINI_NORTH&#39;,
                          &#39;GMOS_N&#39;,
                          &#39;GMOS_IMAGE&#39;,
                          &#39;GEMINI&#39;,
                          &#39;SIDEREAL&#39;,
                          &#39;IMAGE&#39;,
                          &#39;GMOS&#39;,
                          &#39;GMOS_RAW&#39;,
                          &#39;RAW&#39;,
                          &#39;UNPREPARED&#39;],
               &#39;ut_time&#39;: &#39;2016-01-08 05:21:58.700000&#39;,
               &#39;waveband&#39;: &#39;r&#39;,
               &#39;wavelength&#39;: None},
 &#39;msgtype&#39;: &#39;qametric&#39;,
 &#39;timestamp&#39;: 1452231232.572889}
}
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">7. QA Metrics Database</a><ul>
<li><a class="reference internal" href="#event-manager-adcc-and-fitsstore">7.1. Event Manager, ADCC, and Fitsstore</a></li>
<li><a class="reference internal" href="#interface">7.2. Interface</a><ul>
<li><a class="reference internal" href="#record-structure">7.2.1. Record structure</a></li>
<li><a class="reference internal" href="#bg">7.2.2. bg</a><ul>
<li><a class="reference internal" href="#example">7.2.2.1. Example</a></li>
<li><a class="reference internal" href="#field-definitions">7.2.2.2. Field Definitions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#cc">7.2.3. cc</a><ul>
<li><a class="reference internal" href="#id1">7.2.3.1. Example</a></li>
<li><a class="reference internal" href="#field-defintions">7.2.3.2. Field Defintions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#iq">7.2.4. iq</a><ul>
<li><a class="reference internal" href="#id2">7.2.4.1. Example</a></li>
<li><a class="reference internal" href="#id3">7.2.4.2. Field Defintions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#metadata">7.2.5. metadata</a><ul>
<li><a class="reference internal" href="#id4">7.2.5.1. Example</a></li>
<li><a class="reference internal" href="#id5">7.2.5.2. Field Defintions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#msgtype">7.2.6. msgtype</a></li>
<li><a class="reference internal" href="#timestamp">7.2.7. timestamp</a></li>
</ul>
</li>
<li><a class="reference internal" href="#example-of-a-full-qa-metrics-record">7.3. Example of a full QA metrics record</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="calib.html"
                        title="previous chapter">6. Calibrations Association and Handling</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="appendices/appendix_design.html"
                        title="next chapter">RecipeSystem Design Notes</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/metrics.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="appendices/appendix_design.html" title="RecipeSystem Design Notes"
             >next</a> |</li>
        <li class="right" >
          <a href="calib.html" title="6. Calibrations Association and Handling"
             >previous</a> |</li>
        <li><a href="index.html">RecipeSystem Programmer&#39;s Manual 0.9.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, Kathleen Labrie.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>