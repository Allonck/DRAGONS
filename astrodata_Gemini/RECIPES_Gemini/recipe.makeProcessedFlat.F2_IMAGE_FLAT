# This recipe performs the standardization and corrections needed to convert 
# the raw input flat images into a single stacked and normalized flat image. 
# This output processed flat is stored on disk using storeProcessedFlat and 
# has a name equal to the name of the first input flat image with "_flat.fits" 
# appended.

prepare
addDQ
writeOutputs(suffix="_dq", strip=True)
addVAR(read_noise=True)
#nonlinearityCorrect
aduToElectrons
writeOutputs(suffix="_aduToEle", strip=True)
addVAR(poisson_noise=True)
writeOutputs(suffix="_var", strip=True)
#removeThermalEmissionFromFlat
stackFrames
writeOutputs(suffix="_stack", strip=True)
normalize
writeOutputs(suffix="_flat", strip=True)
storeProcessedFlat

# OR
#prepare
#addDQ
#nonlinearityCorrect
#aduToElectrons
#addVAR(read_noise=True, poisson_noise=True)
#removeThermalEmissionFromFlat
#stackFrames
#normalize
#storeProcessedFlat
