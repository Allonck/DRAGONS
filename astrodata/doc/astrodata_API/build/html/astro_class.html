

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>AstroData API, Methods and Properties &mdash; AstroData API X1 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     'X1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="AstroData API X1 documentation" href="index.html" />
    <link rel="prev" title="AstroData API documentation" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="index.html" title="AstroData API documentation"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">AstroData API X1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="astrodata-api-methods-and-properties">
<h1>AstroData API, Methods and Properties<a class="headerlink" href="#astrodata-api-methods-and-properties" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-astrodata.AstroData">
<span id="class-astrodata"></span><h2>Class AstroData<a class="headerlink" href="#module-astrodata.AstroData" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="astrodata.AstroData.AstroData">
<em class="property">class </em><tt class="descclassname">astrodata.AstroData.</tt><tt class="descname">AstroData</tt><big>(</big><em>dataset=None</em>, <em>phu=None</em>, <em>header=None</em>, <em>data=None</em>, <em>exts=None</em>, <em>extInsts=None</em>, <em>store=None</em>, <em>mode='readonly'</em><big>)</big><a class="headerlink" href="#astrodata.AstroData.AstroData" title="Permalink to this definition">¶</a></dt>
<dd><p>The AstroData class abstracts datasets stored in MEF files
and provides uniform interfaces for working on datasets from different
instruments and modes.  Configuration packages are used to describe
the specific data characteristics, layout, and to store type-specific
implementations.</p>
<p>MEFs can be generalized as lists of header-data units (HDU), with key-value
pairs populating headers, and pixel values populating the data array.
AstroData interprets a MEF as a single complex entity.  The individual
&#8220;extensions&#8221; within the MEF are available using Python list (&#8220;[]&#8221;) syntax;
they are wrapped in AstroData objects. 
(See <tt class="xref py py-meth docutils literal"><span class="pre">AstroData.__getitem__()</span></tt>).
AstroData uses <tt class="docutils literal"><span class="pre">pyfits</span></tt> for MEF I/O and <tt class="docutils literal"><span class="pre">numpy</span></tt> for pixel manipulations.</p>
<p>While the <tt class="docutils literal"><span class="pre">pyfits</span></tt> and <tt class="docutils literal"><span class="pre">numpy</span></tt> objects are available to the programmer, 
<tt class="docutils literal"><span class="pre">AstroData</span></tt> provides analogous methods for most <tt class="docutils literal"><span class="pre">pyfits</span></tt> functionalities
which allows it to maintain the dataset  as a cohesive whole. The programmer
does however use the <tt class="docutils literal"><span class="pre">numpy.ndarrays</span></tt> directly for pixel manipulation.</p>
<p>In order to identify types of dataset and provide type-specific behavior,
<tt class="docutils literal"><span class="pre">AstroData</span></tt> relies on configuration packages either in the <tt class="docutils literal"><span class="pre">PYTHONPATH</span></tt>
environment variable or the <tt class="docutils literal"><span class="pre">Astrodata</span></tt> package environment variables,
<tt class="docutils literal"><span class="pre">ADCONFIGPATH</span></tt> and <tt class="docutils literal"><span class="pre">RECIPEPATH</span></tt>. A configuration package 
(eg. <tt class="docutils literal"><span class="pre">astrodata_Gemini</span></tt>) contains definitions for all instruments and
modes. A configuration package contains type definitions, meta-data 
functions, information lookup tables, and any other code
or information needed to handle specific types of dataset.</p>
<p>This allows <tt class="docutils literal"><span class="pre">AstroData</span></tt> to manage access to the dataset for convenience
and consistency. For example, <tt class="docutils literal"><span class="pre">AstroData</span></tt> is able:</p>
<blockquote>
<div><ul class="simple">
<li>to allow reduction scripts to have easy access to dataset classification
information in a consistent way across all instruments and modes;</li>
<li>to provide consistent interfaces for obtaining common meta-data across all
instruments and modes;</li>
<li>to relate internal extensions, e.g. discriminate between science and 
variance arrays and associate them properly;</li>
<li>to help propagate header-data units important to the given instrument mode,
but unknown to general purpose transformations.</li>
</ul>
</div></blockquote>
<p>In general, the purpose of <tt class="docutils literal"><span class="pre">AstroData</span></tt> is to provide smart dataset-oriented
interfaces that adapt to dataset type. The primary interfaces are for file
handling, dataset-type checking, and managing meta-data, but <tt class="docutils literal"><span class="pre">AstroData</span></tt> 
also integrates other functionalities.</p>
<p>The AstroData constructor constructs an in-memory representation of a
dataset. If given a filename it uses pyfits to open the dataset, reads
the header and detects applicable types. Binary data, such as pixel
data, is left on disk until referenced.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>dataset</strong> (<em>string, AstroData, HDUList</em>) &#8211; the dataset to load, either a filename (string) path
or URL, an &#8216;AstroData&#8217; instance, or a &#8216;pyfits.HDUList&#8217;</li>
<li><strong>phu</strong> (<em>pyfits.core.Header</em>) &#8211; Primary Header Unit. This object is propagated to all 
astrodata sub-data ImageHDUs. Special handling is made 
for header instances that are passed in as this arg., 
where a phu will be created and the &#8216;.header&#8217; will be 
assigned (ex. hdulist[0], ad.phu, ad[0].hdulist[0], 
ad[&#8216;SCI&#8217;,1].hdulist[0], ad[0].phu, ad[&#8216;SCI&#8217;,1].phu, 
and all the previous with .header appended)</li>
<li><strong>header</strong> &#8211; extension header for images (eg. &#8216;hdulist[1].header&#8217;,
&#8216;ad[0].hdulist[1].header&#8217;, &#8216;ad[&#8216;SCI&#8217;,1].hdulist[1].header&#8217;)</li>
<li><strong>data</strong> (<em>numpy.ndarray</em>) &#8211; the image pixel array (eg. &#8216;hdulist[1].data&#8217;,
&#8216;ad[0].hdulist[1].data&#8217;, &#8216;ad[&#8216;SCI&#8217;,1].hdulist[1].data&#8217;)</li>
<li><strong>exts</strong> (<em>list</em>) &#8211; <p>(advanced) a list of extension indexes in the parent
&#8216;HDUList&#8217; that this instance should refer to, given  integer or 
(EXTNAME, EXTVER) tuples specifying each extension in the pyfits
index space where the PHU is at index 0, the first data extension
is at index 1, and so on. I.e. This is primarily intended for 
internal use when creating &#8220;sub-data&#8221;, which are AstroData instances
that represent a slice, or subset, of some other AstroData instance.</p>
<p>NOTE: if present, this option will override and obscure the 
&lt;extInsts&gt; argument, in other word &lt;extInsts&gt; will be ignored.</p>
<p>Example of sub-data:</p>
<blockquote>
<div>sci_subdata = ad[&#8220;SCI&#8221;]</div></blockquote>
<p>The sub-data is created by passing &#8220;SCI&#8221; as an argument to the
constructor. The &#8216;sci_subdata&#8217; object would consist of its own 
&#8216;AstroData&#8217; instance referring to it&#8217;s own <tt class="docutils literal"><span class="pre">HDUList</span></tt>, but the 
HDUs in this list would still be shared (in memory) with the &#8216;ad&#8217;
object, and appear in its <tt class="docutils literal"><span class="pre">HDUList</span></tt> as well.</p>
</li>
<li><strong>extInsts</strong> (<em>list of pyfits.HDU objects</em>) &#8211; (advanced) A list of extensions this instance should 
contain, specified as actual pyfits.HDU instances. NOTE: if the 
&#8216;exts&#8217; argument is also set, <tt class="docutils literal"><span class="pre">extInsts</span></tt> is ignored.</li>
<li><strong>store</strong> (<em>string</em>) &#8211; directory where a copy of the original file will be 
stored.  This is used in the special case where the
filename is an URL to a remote fits file.  Otherwise it has
no effect.</li>
<li><strong>mode</strong> (<em>string</em>) &#8211; IO access mode, same as pyfits mode (&#8220;readonly&#8221;, &#8220;update&#8221;,
or &#8220;append&#8221;) with one additional AstroData-specific mode, &#8220;new&#8221;.
If the mode is &#8220;new&#8221;, and a filename is provided, the constructor
checks that the named file does not exist on disk,
and if it does not it creates an empty <tt class="docutils literal"><span class="pre">AstroData</span></tt> of that name 
but does not write it to disk. Such an <tt class="docutils literal"><span class="pre">AstroData</span></tt> 
instance is ready to have HDUs appended, and to be written to disk
at the user&#8217;s command with <tt class="docutils literal"><span class="pre">ad.write()</span></tt>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="astrodata.AstroData.AstroData.__getitem__">
<tt class="descname">__getitem__</tt><big>(</big><em>ext</em><big>)</big><a class="headerlink" href="#astrodata.AstroData.AstroData.__getitem__" title="Permalink to this definition">¶</a></dt>
<dd><p>AstroData instances behave as list-like objects and therefore pythonic
slicing operations may be performed on instances of this class.
This method provides support for list slicing with the &#8220;[]&#8221; syntax.
Slicing is used to create AstroData objects associated with &#8220;subdata&#8221; 
of the parent AstroData object, that is, consisting of
an HDUList made up of some subset of the parent MEF.</p>
<blockquote>
<div><p>E.g.,</p>
<p><em>datasetA = AstroData(dataset=&#8221;datasetMEF.fits&#8221;)</em></p>
<p><em>datasetB = datasetA[&#8216;SCI&#8217;]</em></p>
<p><em>datasetC = datasetA[2]</em></p>
<p><em>datasetD = datasetA[(&#8220;SCI&#8221;,1)]</em></p>
<p>etc.</p>
</div></blockquote>
<p>In this case, after the operations, datasetB is an <tt class="docutils literal"><span class="pre">AstroData</span></tt> object
associated with the same MEF, sharing some of the the same actual HDUs
in memory as <tt class="docutils literal"><span class="pre">datasetA</span></tt>. The object in <tt class="docutils literal"><span class="pre">datasetB</span></tt> will behave as if
the SCI extensions are its only members, and it does in fact have its 
own pyfits.HDUList. Note that &#8216;datasetA&#8217; and &#8216;datasetB&#8217; share the 
PHU and also the data structures of the HDUs they have in common, so 
that a change to &#8216;datasetA[(&#8216;SCI&#8217;,1)].data&#8217; will change the 
&#8216;datasetB[(&#8216;SCI&#8217;,1)].data&#8217; member and vice versa. They are in fact both
references to the same numpy array in memory. The &#8216;HDUList&#8217; is a 
different list, however, that references common HDUs. If a subdata 
related &#8216;AstroData&#8217; object is written to disk, the resulting MEF will
contain only the extensions in the subdata&#8217;s &#8216;HDUList&#8217;.</p>
<p>Note: Integer extensions start at 0 for the data-containing 
extensions, not at the PHU as with pyfits.  This is important:
&#8216;ad[0]&#8217; is the first content extension, in a traditional MEF 
perspective, the extension AFTER the PHU; it is not the PHU!  In
<tt class="docutils literal"><span class="pre">AstroData</span></tt> instances, the PHU is purely a header, and not counted
as an extension in the way that headers generally are not counted
as their own elements in the array they contain meta-data for.
The PHU can be accessed via the &#8216;phu&#8217; member.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>ext</strong> (<em>&lt;str&gt;, &lt;int&gt;, or &lt;tuple&gt;</em>) &#8211; Integer index, an index tuple (EXTNAME, EXTVER),
or EXTNAME name. If an int or tuple, the single
extension identified is wrapped with an AstroData instance,
and single-extension members of the AstroData object can 
be used. A string &#8216;EXTNAME&#8217; results in all extensions with 
the given EXTNAME wrapped by the new instance.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">AstroData instance associated with the subset of data.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">&lt;AstroData&gt;</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises :</th><td class="field-body">KeyError, IndexError</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="astrodata.AstroData.AstroData.data">
<tt class="descname">data</tt><a class="headerlink" href="#astrodata.AstroData.AstroData.data" title="Permalink to this definition">¶</a></dt>
<dd><p>The data property can only be used for single-HDU AstroData
instances, such as those returned during iteration. To set the 
data member, use <em>ad.data = newdata</em>, where <em>newdata</em> must be a 
numpy array. To get the data member, use <em>npdata = ad.data</em>.</p>
<p>The &#8220;data&#8221; member returns appropriate HDU&#8217;s data member(s) specifically
for the case in which the AstroData instance has ONE HDU (in 
addition to the PHU). This allows a single-extension AstroData, 
such as AstroData generates through iteration, to be used as though 
it simply is just the one extension. One is dealing with single 
extension AstroData instances when iterating over the AstroData 
extensions  and when picking out an extension by integer or tuple 
indexing. 
Eg.,</p>
<blockquote>
<div><dl class="docutils">
<dt>for ad in dataset[SCI]:</dt>
<dd><dl class="first last docutils">
<dt># ad is a single-HDU index</dt>
<dd>ad.data = newdata</dd>
</dl>
</dd>
</dl>
</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">data array associated with the single extension</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">&lt;ndarray&gt;</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises :</th><td class="field-body">Errors.SingleHDUMemberExcept</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="astrodata.AstroData.AstroData.filename">
<tt class="descname">filename</tt><a class="headerlink" href="#astrodata.AstroData.AstroData.filename" title="Permalink to this definition">¶</a></dt>
<dd><p>&#8216;filename&#8217; is monitored so that the mode can be changed 
from &#8216;readonly&#8217; when &#8216;filename&#8217; is changed.</p>
</dd></dl>

<dl class="attribute">
<dt id="astrodata.AstroData.AstroData.header">
<tt class="descname">header</tt><a class="headerlink" href="#astrodata.AstroData.AstroData.header" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the header member for Single-HDU AstroData instances.</p>
<p>The header property can only be used for single-HDU AstroData
instances, such as those returned during iteration. It is a
property attribute which uses <em>get_header(..)</em> and
<em>set_header(..)</em> to access the header member with the &#8220;=&#8221; syntax.
To set the header member, use <em>ad.header = newheader</em>, where
<em>newheader</em> must be a pyfits.Header object. To get the header
member, use <em>hduheader = ad.header</em>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">header</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">pyfits.Header</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises :</th><td class="field-body">Errors.SingleHDUMemberExcept</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="astrodata.AstroData.AstroData.headers">
<tt class="descname">headers</tt><a class="headerlink" href="#astrodata.AstroData.AstroData.headers" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns header member(s) for all extension (except PHU).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">list of pyfits.Header instances</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">&lt;list&gt;</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="astrodata.AstroData.AstroData.hdulist">
<tt class="descname">hdulist</tt><a class="headerlink" href="#astrodata.AstroData.AstroData.hdulist" title="Permalink to this definition">¶</a></dt>
<dd><p>List of header-data units on the instance.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">The AstroData&#8217;s HDUList as returned by pyfits.open()</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">&lt;pyfits.HDUList&gt;</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="astrodata.AstroData.AstroData.append">
<tt class="descname">append</tt><big>(</big><em>moredata=None</em>, <em>data=None</em>, <em>header=None</em>, <em>extname=None</em>, <em>extver=None</em>, <em>auto_number=False</em>, <em>do_deepcopy=False</em><big>)</big><a class="headerlink" href="#astrodata.AstroData.AstroData.append" title="Permalink to this definition">¶</a></dt>
<dd><p>Appends header-data units (HDUs) to the AstroData instance.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>moredata</strong> (<em>pyfits.HDU, pyfits.HDUList, or AstroData</em>) &#8211; either an AstroData instance, an HDUList instance, 
or an HDU instance to add to this AstroData object.
When present, data and header arguments will be 
ignored.</li>
<li><strong>data</strong> (<em>numpy.ndarray</em>) &#8211; &#8216;data&#8217; and &#8216;header&#8217; are used to construct a new HDU which
is then added to the <tt class="docutils literal"><span class="pre">HDUList</span></tt> associated to the 
AstroData instance. The &#8216;data&#8217; argument should be set to 
a valid numpy array. If &#8216;modedata&#8217; is not specified, 
&#8216;data&#8217; and &#8216;header&#8217; must both be set.</li>
<li><strong>header</strong> (<em>pyfits.Header</em>) &#8211; &#8216;data&#8217; and &#8216;header&#8217; are used to construct a new 
HDU which is then added to the &#8216;HDUList&#8217; associated to 
AstroData instance. The &#8216;header&#8217; argument should be set 
to a valid pyfits.Header object.</li>
<li><strong>auto_number</strong> (<em>&lt;bool&gt;</em>) &#8211; auto-increment the extension version, &#8216;EXTVER&#8217;, 
to fit file convention</li>
<li><strong>extname</strong> (<em>&lt;str&gt;</em>) &#8211; extension name as set in keyword &#8216;EXTNAME&#8217; 
(eg. &#8216;SCI&#8217;, &#8216;VAR&#8217;, &#8216;DQ&#8217;). This is used only when 
&#8216;header&#8217; and &#8216;data&#8217; are used.</li>
<li><strong>extver</strong> (<em>&lt;int&gt;</em>) &#8211; extension version as set in keyword &#8216;EXTVER&#8217;. This is 
used only when &#8216;header&#8217; and &#8216;data&#8217; are used.</li>
<li><strong>do_deepcopy</strong> (<em>&lt;bool&gt;</em>) &#8211; deepcopy the input before appending. May be useful
when auto_number is True and the input comes from 
another AD object.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="astrodata.AstroData.AstroData.close">
<tt class="descname">close</tt><big>(</big><big>)</big><a class="headerlink" href="#astrodata.AstroData.AstroData.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Method will close the &#8216;HDUList&#8217; on this instance.</p>
</dd></dl>

<dl class="method">
<dt id="astrodata.AstroData.AstroData.insert">
<tt class="descname">insert</tt><big>(</big><em>index</em>, <em>moredata=None</em>, <em>data=None</em>, <em>header=None</em>, <em>extname=None</em>, <em>extver=None</em>, <em>auto_number=False</em>, <em>do_deepcopy=False</em><big>)</big><a class="headerlink" href="#astrodata.AstroData.AstroData.insert" title="Permalink to this definition">¶</a></dt>
<dd><p>Insert a header-data unit (HDUs) into the AstroData instance.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>index</strong> (<em>&lt;int&gt; or &lt;tuple&gt; (EXTNAME,EXTVER)</em>) &#8211; the extension index, either an int or (EXTNAME, EXTVER)
pair before which the extension is to be inserted.
Note: the first data extension is [0]; cannot insert
before the PHU. &#8216;index&#8217; is the  Astrodata index, where
0 is the 1st extension.</li>
<li><strong>moredata</strong> (<em>pyfits.HDU, pyfits.HDUList, or AstroData</em>) &#8211; An AstroData instance, an HDUList instance, or
an HDU instance. When present, data and header will be
ignored.</li>
<li><strong>data</strong> (<em>numpy.ndarray</em>) &#8211; &#8216;data&#8217; and &#8216;header&#8217; are used in conjunction to construct a
new HDU which is then added to the HDUList of the AstroData
instance. &#8216;data&#8217; should be set to a valid numpy array. 
If &#8216;modedata&#8217; is not specified, &#8216;data&#8217; and &#8216;header&#8217; both
must be set.</li>
<li><strong>header</strong> (<em>pyfits.Header</em>) &#8211; &#8216;data&#8217; and &#8216;header&#8217; are used in conjunction to construct
a new HDU which is then added to the HDUList of the
instance. The &#8216;header&#8217; argument should be set to a valid
pyfits.Header object. If &#8216;moredata&#8217; is not specified,
&#8216;data&#8217; and &#8216;header&#8217; both must be set.</li>
<li><strong>extname</strong> (<em>&lt;str&gt;</em>) &#8211; extension name (eg. &#8216;SCI&#8217;, &#8216;VAR&#8217;, &#8216;DQ&#8217;)</li>
<li><strong>extver</strong> (<em>&lt;int&gt;</em>) &#8211; extension version (eg. 1, 2, 3)</li>
<li><strong>auto_number</strong> (<em>&lt;bool&gt;</em>) &#8211; auto-increment the extension version, &#8216;EXTVER&#8217;,
to fit file convention. If set to True, this will
override the &#8216;extver&#8217; and &#8216;extname&#8217; arguments
settings.</li>
<li><strong>do_deepcopy</strong> (<em>&lt;bool&gt;</em>) &#8211; deepcopy the input before appending. May be useful
when auto_number is True and the input comes from
another AD object.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="astrodata.AstroData.AstroData.open">
<tt class="descname">open</tt><big>(</big><em>source</em>, <em>mode='readonly'</em><big>)</big><a class="headerlink" href="#astrodata.AstroData.AstroData.open" title="Permalink to this definition">¶</a></dt>
<dd><p>Method wraps a source dataset, which can be in memory as another
AstroData or pyfits HDUList, or on disk, given as the string filename.</p>
<p>NOTE: In general, users should not use &#8216;open&#8217; directly, but pass
the filename to the AstroData constructor. The constructor uses
open(..) however. Users should use the constructor, which may 
perform extra operations.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>source</strong> (<em>&lt;str&gt; | &lt;AstroData&gt; | &lt;pyfits.HDUList&gt;</em>) &#8211; source contains some reference for the dataset to 
be opened and associated with this instance. Generally
it would be a filename, but can also be
an AstroData instance or a pyfits.HDUList instance.</li>
<li><strong>mode</strong> (<em>&lt;str&gt;</em>) &#8211; IO access mode, same as the pyfits open mode, &#8216;readonly,
&#8216;update&#8217;, or &#8216;append&#8217;.  The mode is passed to pyfits so
if it is an illegal mode name, pyfits will be the
subsystem reporting the error.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="astrodata.AstroData.AstroData.remove">
<tt class="descname">remove</tt><big>(</big><em>index</em>, <em>hdui=False</em><big>)</big><a class="headerlink" href="#astrodata.AstroData.AstroData.remove" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>index</strong> (<em>&lt;int&gt;, or &lt;tuple&gt; (EXTNAME,EXTVER)</em>) &#8211; the extension index, either an int or (EXTNAME, EXTVER)
pair before which the extension is to be inserted.
Note: the first data extension is [0], you cannot insert 
before the PHU. Index always refers to Astrodata Numbering 
system, 0 = HDU</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="astrodata.AstroData.AstroData.store_original_name">
<tt class="descname">store_original_name</tt><big>(</big><big>)</big><a class="headerlink" href="#astrodata.AstroData.AstroData.store_original_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Method adds the key &#8216;ORIGNAME&#8217; to PHU of an astrodata object 
containing the filename when object was instantiated (without any 
directory info, ie. the basename).</p>
<p>If key has all ready been added (ie. has undergone processing where
store_original_name was performed before), then the value original 
filename is just returned.  If the key is there, but does not match
the original filename of the object, then the original name is 
returned, NOT the value in the PHU. The value in the PHU can always be
found using ad.phu_get_key_value(&#8216;ORIGNAME&#8217;).</p>
</dd></dl>

<dl class="method">
<dt id="astrodata.AstroData.AstroData.write">
<tt class="descname">write</tt><big>(</big><em>filename=None</em>, <em>clobber=False</em>, <em>rename=None</em>, <em>prefix=None</em>, <em>suffix=None</em><big>)</big><a class="headerlink" href="#astrodata.AstroData.AstroData.write" title="Permalink to this definition">¶</a></dt>
<dd><p>The write method acts similarly to the &#8216;pyfits HDUList.writeto(..)&#8217;
function if a filename is given, or like &#8216;pyfits.HDUList.update(..)&#8217; if 
no name is given, using whatever the current name is set to. When a name
is given, this becomes the new name of the <tt class="docutils literal"><span class="pre">AstroData</span></tt> object and
will be used on subsequent calls to  write for which a filename is not
provided. If the <tt class="docutils literal"><span class="pre">clobber</span></tt> flag is <tt class="docutils literal"><span class="pre">False</span></tt> (the default) then 
&#8216;write(..)&#8217; throws an exception if the file already exists.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>filename</strong> (<em>&lt;str&gt;</em>) &#8211; name of the file to write to. Optional if the instance
already has a filename defined, which might not be the 
case for new AstroData instances created in memory.</li>
<li><strong>clobber</strong> (<em>&lt;bool&gt;</em>) &#8211; This flag drives if AstroData will overwrite an existing
file.</li>
<li><strong>rename</strong> (<em>&lt;bool&gt;</em>) &#8211; This flag allows you to write the AstroData instance to
a new filename, but leave the &#8216;current&#8217; name in memory.</li>
<li><strong>prefix</strong> (<em>&lt;str&gt;</em>) &#8211; Add a prefix to <tt class="docutils literal"><span class="pre">filename</span></tt>.</li>
<li><strong>suffix</strong> (<em>&lt;str&gt;</em>) &#8211; Add a suffix to <tt class="docutils literal"><span class="pre">filename</span></tt>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="astrodata.AstroData.AstroData.type">
<tt class="descname">type</tt><big>(</big><em>prune=False</em><big>)</big><a class="headerlink" href="#astrodata.AstroData.AstroData.type" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of type classifications. It is possible to &#8216;prune&#8217; 
the list so that only leaf nodes are returned, which is 
useful when leaf nodes take precedence such as for descriptors.</p>
<p>Note: types consist of a hierarchical tree of dataset types.
This latter tree maps roughly to instrument-modes, with instrument 
types branching from the general observatory type, (e.g. &#8216;GEMINI&#8217;).</p>
<p>Currently the distinction betwen status and type is not used by the
system (e.g. in type-specific default recipe assignments) and is
provided as a service for higher level code, e.g. primitives and
scripts which make use of the distinction.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>prune</strong> (<em>&lt;bool&gt;</em>) &#8211; flag which controls &#8216;pruning&#8217; the returned type list 
so that only the leaf node type for a given set of 
related types is returned.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">list of classification names</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">&lt;list&gt; of strings</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="astrodata.AstroData.AstroData.status">
<tt class="descname">status</tt><big>(</big><em>prune=False</em><big>)</big><a class="headerlink" href="#astrodata.AstroData.AstroData.status" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the set of &#8216;status&#8217; classifications, which are those that 
tend to change during the reduction of a dataset based on 
the amount of processing, e.g. RAW vs PREPARED.  Strictly, a &#8216;status&#8217; 
type is any type defined in or below the status part of the 
&#8216;classification&#8217; directory within the configuration package. For 
example, in the Gemini type configuration this means any type definition
files in or below the &#8216;astrodata_Gemini/ADCONFIG/classification/status&#8217;
directory.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>prune</strong> (<em>&lt;bool&gt;</em>) &#8211; flag which controls &#8216;pruning&#8217; the returned type list 
so that only the leaf node type for a given set of 
related status types is returned.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">list of classification names</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">&lt;list&gt; of strings</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="astrodata.AstroData.AstroData.count_exts">
<tt class="descname">count_exts</tt><big>(</big><em>extname=None</em><big>)</big><a class="headerlink" href="#astrodata.AstroData.AstroData.count_exts" title="Permalink to this definition">¶</a></dt>
<dd><p>The count_exts() function returns the number of extensions matching the
passed &lt;extname&gt; (as stored in the HDUs &#8220;EXTNAME&#8221; header).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>extname</strong> (<em>&lt;str&gt;</em>) &#8211; the name of the extension, equivalent to the
value associated with the &#8220;EXTNAME&#8221; key in the extension
header.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">number of &lt;extname&gt; extensions</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">&lt;int&gt;</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="astrodata.AstroData.AstroData.ext_index">
<tt class="descname">ext_index</tt><big>(</big><em>extension</em>, <em>hduref=False</em><big>)</big><a class="headerlink" href="#astrodata.AstroData.AstroData.ext_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes an extension index, either an integer or (EXTNAME, EXTVER) 
tuple, and returns the index location of the extension.  If hduref is 
set to True, then the index returned is relative to the HDUList 
(0=PHU, 1=First non-PHU extension). If hduref is False (the default) 
then the index returned is relative to the AstroData numbering 
convention, where index=0 is the first extension in the MEF file.</p>
</dd></dl>

<dl class="method">
<dt id="astrodata.AstroData.AstroData.rename_ext">
<tt class="descname">rename_ext</tt><big>(</big><em>name</em>, <em>ver=None</em>, <em>force=True</em><big>)</big><a class="headerlink" href="#astrodata.AstroData.AstroData.rename_ext" title="Permalink to this definition">¶</a></dt>
<dd><p>The rename_ext(..) function is used in order to rename an 
HDU with a new EXTNAME and EXTVER identifier.  Merely changing 
the EXTNAME and EXTVER values in the extensions pyfits.Header 
is not sufficient. Though the values change in the pyfits.Header 
object, there are special HDU class members which are not updated.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Warning :</th><td class="field-body"><p class="first">This function manipulates private (or somewhat private) 
HDU members, specifically &#8216;name&#8217; and &#8216;_extver&#8217;. STSCI 
has been informed of the issue and has made a special 
HDU function for performing the renaming. 
When generally available, this new function will be used 
instead of manipulating the  HDU&#8217;s properties directly, 
and this function will call the new pyfits.HDUList(..) 
function.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Note :</th><td class="field-body"><p class="first">Works only on single extension instances.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> (<em>&lt;str&gt;</em>) &#8211; New &#8216;EXTNAME&#8217; for the given extension.</li>
<li><strong>ver</strong> (<em>&lt;int&gt;</em>) &#8211; New &#8216;EXTVER&#8217; for the given extension</li>
<li><strong>force</strong> (<em>&lt;bool&gt;</em>) &#8211; Will update even on subdata, or shared hdulist.
Default=True</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="astrodata.AstroData.AstroData.info">
<tt class="descname">info</tt><big>(</big><em>oid=False</em>, <em>table=False</em>, <em>help=False</em><big>)</big><a class="headerlink" href="#astrodata.AstroData.AstroData.info" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints to stdout information about the phu and extensions found 
in the current instance.</p>
</dd></dl>

<dl class="method">
<dt id="astrodata.AstroData.AstroData.get_key_value">
<tt class="descname">get_key_value</tt><big>(</big><em>key</em><big>)</big><a class="headerlink" href="#astrodata.AstroData.AstroData.get_key_value" title="Permalink to this definition">¶</a></dt>
<dd><p>The get_key_value() function is used to get the value associated
with a given key in the data-header unit of a single-HDU
AstroData instance (such as returned by iteration).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Note :</th><td class="field-body"><p class="first">Single extension AstroData objects are those with only a single
header-data unit besides the PHU.  They may exist if a single
extension file is loaded, but in general are produced by indexing or
iteration instructions, Eg.:</p>
<blockquote>
<div><p>sead = ad[(&#8220;SCI&#8221;,1)]</p>
<dl class="docutils">
<dt>for sead in ad[&#8220;SCI&#8221;]:</dt>
<dd><p class="first last">...</p>
</dd>
</dl>
</div></blockquote>
<p>The variable &#8220;sead&#8221; above is ensured to hold a single extension
AstroData object, and can be used more convieniently.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>key</strong> (<em>&lt;str&gt; header keyword</em>) &#8211; name of header keyword to set</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">header keyword value</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first">&lt;int&gt;, or &lt;float&gt;, or &lt;str&gt;</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises :</th><td class="field-body"><p class="first last">SingleHDUMemberExcept</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="astrodata.AstroData.AstroData.set_key_value">
<tt class="descname">set_key_value</tt><big>(</big><em>key</em>, <em>value</em>, <em>comment=None</em><big>)</big><a class="headerlink" href="#astrodata.AstroData.AstroData.set_key_value" title="Permalink to this definition">¶</a></dt>
<dd><p>The set_key_value() function is used to set the value (and optionally
the comment) associated with a given key in the data-header of a 
single-HDU AstroData instance. The value argument will be converted to 
string, so it must have a string operator member function or be passed 
in as string.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Note :</th><td class="field-body"><p class="first">Single extension AstroData objects are those with only a single
header-data unit besides the PHU.  They may exist if a single
extension file is loaded, but in general are produced by indexing 
or iteration instructions.Eg.:</p>
<blockquote>
<div><p>sead = ad[(&#8220;SCI&#8221;,1)]</p>
<dl class="docutils">
<dt>for sead in ad[&#8220;SCI&#8221;]:</dt>
<dd><p class="first last">...</p>
</dd>
</dl>
</div></blockquote>
<p>The variable &#8220;sead&#8221; above is ensured to hold a single extension
AstroData object, and can be used more convieniently.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>key</strong> (<em>&lt;str&gt;</em>) &#8211; header keyword</li>
<li><strong>value</strong> (<em>&lt;int&gt;, or &lt;float&gt;, or &lt;str&gt;</em>) &#8211; header keyword value</li>
<li><strong>comment</strong> (<em>&lt;str&gt;</em>) &#8211; header keyword comment</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="astrodata.AstroData.AstroData.phu_get_key_value">
<tt class="descname">phu_get_key_value</tt><big>(</big><em>key</em><big>)</big><a class="headerlink" href="#astrodata.AstroData.AstroData.phu_get_key_value" title="Permalink to this definition">¶</a></dt>
<dd><p>The phu_get_key_value(..) function returns the value associated 
with the given key within the primary header unit of the dataset.
The value is returned as a string (storage format) and must be 
converted as necessary by the caller.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>key</strong> (<em>&lt;str&gt;</em>) &#8211; name of header value to retrieve</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">keyword value as string or None if not present.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">&lt;str&gt;</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="astrodata.AstroData.AstroData.phu_set_key_value">
<tt class="descname">phu_set_key_value</tt><big>(</big><em>keyword=None</em>, <em>value=None</em>, <em>comment=None</em><big>)</big><a class="headerlink" href="#astrodata.AstroData.AstroData.phu_set_key_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Add or update a keyword in the PHU of the AstroData object with a
specific value and, optionally, a comment</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>keyword</strong> (<em>&lt;str&gt;</em>) &#8211; Name of the keyword to add or update in the PHU</li>
<li><strong>value</strong> (<em>&lt;int&gt;, &lt;float&gt;, or &lt;str&gt;</em>) &#8211; Value of the keyword to add or update in the PHU</li>
<li><strong>comment</strong> (<em>string</em>) &#8211; Comment of the keyword to add or update in the PHU</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">AstroData API, Methods and Properties</a><ul>
<li><a class="reference internal" href="#module-astrodata.AstroData">Class AstroData</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">AstroData API documentation</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/astro_class.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="index.html" title="AstroData API documentation"
             >previous</a> |</li>
        <li><a href="index.html">AstroData API X1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, Kenneth Anderson.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.2.
    </div>
  </body>
</html>