% Generated by Sphinx.
\def\sphinxdocclass{report}
\documentclass[letterpaper,10pt,english]{sphinxmanual}
\usepackage[utf8]{inputenc}
\DeclareUnicodeCharacter{00A0}{\nobreakspace}
\usepackage{cmap}
\usepackage[T1]{fontenc}
\usepackage{babel}
\usepackage{times}
\usepackage[Bjarne]{fncychap}
\usepackage{longtable}
\usepackage{sphinx}
\usepackage{multirow}


\title{AstroData API Documentation}
\date{November 20, 2014}
\release{X1}
\author{Kenneth Anderson}
\newcommand{\sphinxlogo}{}
\renewcommand{\releasename}{Release}
\makeindex

\makeatletter
\def\PYG@reset{\let\PYG@it=\relax \let\PYG@bf=\relax%
    \let\PYG@ul=\relax \let\PYG@tc=\relax%
    \let\PYG@bc=\relax \let\PYG@ff=\relax}
\def\PYG@tok#1{\csname PYG@tok@#1\endcsname}
\def\PYG@toks#1+{\ifx\relax#1\empty\else%
    \PYG@tok{#1}\expandafter\PYG@toks\fi}
\def\PYG@do#1{\PYG@bc{\PYG@tc{\PYG@ul{%
    \PYG@it{\PYG@bf{\PYG@ff{#1}}}}}}}
\def\PYG#1#2{\PYG@reset\PYG@toks#1+\relax+\PYG@do{#2}}

\expandafter\def\csname PYG@tok@gd\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.63,0.00,0.00}{##1}}}
\expandafter\def\csname PYG@tok@gu\endcsname{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.50,0.00,0.50}{##1}}}
\expandafter\def\csname PYG@tok@gt\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.00,0.27,0.87}{##1}}}
\expandafter\def\csname PYG@tok@gs\endcsname{\let\PYG@bf=\textbf}
\expandafter\def\csname PYG@tok@gr\endcsname{\def\PYG@tc##1{\textcolor[rgb]{1.00,0.00,0.00}{##1}}}
\expandafter\def\csname PYG@tok@cm\endcsname{\let\PYG@it=\textit\def\PYG@tc##1{\textcolor[rgb]{0.25,0.50,0.56}{##1}}}
\expandafter\def\csname PYG@tok@vg\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.73,0.38,0.84}{##1}}}
\expandafter\def\csname PYG@tok@m\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.13,0.50,0.31}{##1}}}
\expandafter\def\csname PYG@tok@mh\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.13,0.50,0.31}{##1}}}
\expandafter\def\csname PYG@tok@cs\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.25,0.50,0.56}{##1}}\def\PYG@bc##1{\setlength{\fboxsep}{0pt}\colorbox[rgb]{1.00,0.94,0.94}{\strut ##1}}}
\expandafter\def\csname PYG@tok@ge\endcsname{\let\PYG@it=\textit}
\expandafter\def\csname PYG@tok@vc\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.73,0.38,0.84}{##1}}}
\expandafter\def\csname PYG@tok@il\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.13,0.50,0.31}{##1}}}
\expandafter\def\csname PYG@tok@go\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.20,0.20,0.20}{##1}}}
\expandafter\def\csname PYG@tok@cp\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.00,0.44,0.13}{##1}}}
\expandafter\def\csname PYG@tok@gi\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.00,0.63,0.00}{##1}}}
\expandafter\def\csname PYG@tok@gh\endcsname{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.00,0.00,0.50}{##1}}}
\expandafter\def\csname PYG@tok@ni\endcsname{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.84,0.33,0.22}{##1}}}
\expandafter\def\csname PYG@tok@nl\endcsname{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.00,0.13,0.44}{##1}}}
\expandafter\def\csname PYG@tok@nn\endcsname{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.05,0.52,0.71}{##1}}}
\expandafter\def\csname PYG@tok@no\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.38,0.68,0.84}{##1}}}
\expandafter\def\csname PYG@tok@na\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.25,0.44,0.63}{##1}}}
\expandafter\def\csname PYG@tok@nb\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.00,0.44,0.13}{##1}}}
\expandafter\def\csname PYG@tok@nc\endcsname{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.05,0.52,0.71}{##1}}}
\expandafter\def\csname PYG@tok@nd\endcsname{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.33,0.33,0.33}{##1}}}
\expandafter\def\csname PYG@tok@ne\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.00,0.44,0.13}{##1}}}
\expandafter\def\csname PYG@tok@nf\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.02,0.16,0.49}{##1}}}
\expandafter\def\csname PYG@tok@si\endcsname{\let\PYG@it=\textit\def\PYG@tc##1{\textcolor[rgb]{0.44,0.63,0.82}{##1}}}
\expandafter\def\csname PYG@tok@s2\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.25,0.44,0.63}{##1}}}
\expandafter\def\csname PYG@tok@vi\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.73,0.38,0.84}{##1}}}
\expandafter\def\csname PYG@tok@nt\endcsname{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.02,0.16,0.45}{##1}}}
\expandafter\def\csname PYG@tok@nv\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.73,0.38,0.84}{##1}}}
\expandafter\def\csname PYG@tok@s1\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.25,0.44,0.63}{##1}}}
\expandafter\def\csname PYG@tok@gp\endcsname{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.78,0.36,0.04}{##1}}}
\expandafter\def\csname PYG@tok@sh\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.25,0.44,0.63}{##1}}}
\expandafter\def\csname PYG@tok@ow\endcsname{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.00,0.44,0.13}{##1}}}
\expandafter\def\csname PYG@tok@sx\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.78,0.36,0.04}{##1}}}
\expandafter\def\csname PYG@tok@bp\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.00,0.44,0.13}{##1}}}
\expandafter\def\csname PYG@tok@c1\endcsname{\let\PYG@it=\textit\def\PYG@tc##1{\textcolor[rgb]{0.25,0.50,0.56}{##1}}}
\expandafter\def\csname PYG@tok@kc\endcsname{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.00,0.44,0.13}{##1}}}
\expandafter\def\csname PYG@tok@c\endcsname{\let\PYG@it=\textit\def\PYG@tc##1{\textcolor[rgb]{0.25,0.50,0.56}{##1}}}
\expandafter\def\csname PYG@tok@mf\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.13,0.50,0.31}{##1}}}
\expandafter\def\csname PYG@tok@err\endcsname{\def\PYG@bc##1{\setlength{\fboxsep}{0pt}\fcolorbox[rgb]{1.00,0.00,0.00}{1,1,1}{\strut ##1}}}
\expandafter\def\csname PYG@tok@kd\endcsname{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.00,0.44,0.13}{##1}}}
\expandafter\def\csname PYG@tok@ss\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.32,0.47,0.09}{##1}}}
\expandafter\def\csname PYG@tok@sr\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.14,0.33,0.53}{##1}}}
\expandafter\def\csname PYG@tok@mo\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.13,0.50,0.31}{##1}}}
\expandafter\def\csname PYG@tok@mi\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.13,0.50,0.31}{##1}}}
\expandafter\def\csname PYG@tok@kn\endcsname{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.00,0.44,0.13}{##1}}}
\expandafter\def\csname PYG@tok@o\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PYG@tok@kr\endcsname{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.00,0.44,0.13}{##1}}}
\expandafter\def\csname PYG@tok@s\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.25,0.44,0.63}{##1}}}
\expandafter\def\csname PYG@tok@kp\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.00,0.44,0.13}{##1}}}
\expandafter\def\csname PYG@tok@w\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.73,0.73,0.73}{##1}}}
\expandafter\def\csname PYG@tok@kt\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.56,0.13,0.00}{##1}}}
\expandafter\def\csname PYG@tok@sc\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.25,0.44,0.63}{##1}}}
\expandafter\def\csname PYG@tok@sb\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.25,0.44,0.63}{##1}}}
\expandafter\def\csname PYG@tok@k\endcsname{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.00,0.44,0.13}{##1}}}
\expandafter\def\csname PYG@tok@se\endcsname{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.25,0.44,0.63}{##1}}}
\expandafter\def\csname PYG@tok@sd\endcsname{\let\PYG@it=\textit\def\PYG@tc##1{\textcolor[rgb]{0.25,0.44,0.63}{##1}}}

\def\PYGZbs{\char`\\}
\def\PYGZus{\char`\_}
\def\PYGZob{\char`\{}
\def\PYGZcb{\char`\}}
\def\PYGZca{\char`\^}
\def\PYGZam{\char`\&}
\def\PYGZlt{\char`\<}
\def\PYGZgt{\char`\>}
\def\PYGZsh{\char`\#}
\def\PYGZpc{\char`\%}
\def\PYGZdl{\char`\$}
\def\PYGZhy{\char`\-}
\def\PYGZsq{\char`\'}
\def\PYGZdq{\char`\"}
\def\PYGZti{\char`\~}
% for compatibility with earlier versions
\def\PYGZat{@}
\def\PYGZlb{[}
\def\PYGZrb{]}
\makeatother

\begin{document}

\maketitle
\tableofcontents
\phantomsection\label{index::doc}



\chapter{Introduction}
\label{intro:astrodata-api-documentation}\label{intro:introduction}\label{intro::doc}
The AstroData class abstracts datasets stored in MEF files
and provides uniform interfaces for working on datasets from different
instruments and modes.  Configuration packages are used to describe
the specific data characteristics, layout, and to store type-specific
implementations.

MEFs can be generalized as lists of header-data units (HDU), with key-value
pairs populating headers, and pixel values populating the data array.
AstroData interprets a MEF as a single complex entity.  The individual
``extensions'' within the MEF are available using Python list (``{[}{]}'') syntax;
they are wrapped in AstroData objects.

AstroData uses \code{pyfits} for MEF I/O and \code{numpy} for pixel manipulations.

While the \code{pyfits} and \code{numpy} objects are available to the programmer,
\code{AstroData} provides analogous methods for most \code{pyfits} functionalities
which allows it to maintain the dataset  as a cohesive whole. The programmer
does however use the \code{numpy.ndarrays} directly for pixel manipulation.

In order to identify types of dataset and provide type-specific behavior,
\code{AstroData} relies on configuration packages either in the \code{PYTHONPATH}
environment variable or the \code{Astrodata} package environment variables,
\code{ADCONFIGPATH} and \code{RECIPEPATH}. A configuration package
(eg. \code{astrodata\_Gemini}) contains definitions for all instruments and
modes. A configuration package contains type definitions, meta-data
functions, information lookup tables, and any other code
or information needed to handle specific types of dataset.

This allows \code{AstroData} to manage access to the dataset for convenience
and consistency. For example, \code{AstroData} is able:
\begin{itemize}
\item {} 
to allow reduction scripts to have easy access to dataset classification
information in a consistent way across all instruments and modes;

\item {} 
to provide consistent interfaces for obtaining common meta-data across all
instruments and modes;

\item {} 
to relate internal extensions, e.g. discriminate between science and
variance arrays and associate them properly;

\item {} 
to help propagate header-data units important to the given instrument mode,
but unknown to general purpose transformations.

\end{itemize}

In general, the purpose of \code{AstroData} is to provide smart dataset-oriented
interfaces that adapt to dataset type. The primary interfaces are for file
handling, dataset-type checking, and managing meta-data, but \code{AstroData}
also integrates other functionalities.


\chapter{AstroData API, Methods and Properties}
\label{astro_class:astrodata-api-methods-and-properties}\label{astro_class::doc}

\section{Class AstroData}
\label{astro_class:class-astrodata}\label{astro_class:module-astrodata.AstroData}\index{astrodata.AstroData (module)}\index{AstroData (class in astrodata.AstroData)}

\begin{fulllineitems}
\phantomsection\label{astro_class:astrodata.AstroData.AstroData}\pysiglinewithargsret{\strong{class }\code{astrodata.AstroData.}\bfcode{AstroData}}{\emph{dataset=None}, \emph{phu=None}, \emph{header=None}, \emph{data=None}, \emph{exts=None}, \emph{extInsts=None}, \emph{store=None}, \emph{mode='readonly'}}{}
The AstroData constructor constructs an in-memory representation of a
dataset. If given a filename it uses pyfits to open the dataset, reads
the header and detects applicable types. Binary data, such as pixel
data, is left on disk until referenced.
\begin{quote}\begin{description}
\item[{Parameters}] \leavevmode\begin{itemize}
\item {} 
\textbf{dataset} (\emph{string, AstroData, HDUList}) -- the dataset to load, either a filename (string) path
or URL, an `AstroData' instance, or a `pyfits.HDUList'

\item {} 
\textbf{phu} (\emph{pyfits.core.Header}) -- Primary Header Unit. This object is propagated to all 
astrodata sub-data ImageHDUs. Special handling is made 
for header instances that are passed in as this arg., 
where a phu will be created and the `.header' will be 
assigned (ex. hdulist{[}0{]}, ad.phu, ad{[}0{]}.hdulist{[}0{]}, 
ad{[}'SCI',1{]}.hdulist{[}0{]}, ad{[}0{]}.phu, ad{[}'SCI',1{]}.phu, 
and all the previous with .header appended)

\item {} 
\textbf{header} -- extension header for images (eg. `hdulist{[}1{]}.header',
`ad{[}0{]}.hdulist{[}1{]}.header', `ad{[}'SCI',1{]}.hdulist{[}1{]}.header')

\item {} 
\textbf{data} (\emph{numpy.ndarray}) -- the image pixel array (eg. `hdulist{[}1{]}.data',
`ad{[}0{]}.hdulist{[}1{]}.data', `ad{[}'SCI',1{]}.hdulist{[}1{]}.data')

\item {} 
\textbf{exts} (\emph{list}) -- 
(advanced) a list of extension indexes in the parent
`HDUList' that this instance should refer to, given  integer or 
(EXTNAME, EXTVER) tuples specifying each extension in the pyfits
index space where the PHU is at index 0, the first data extension
is at index 1, and so on. I.e. This is primarily intended for 
internal use when creating ``sub-data'', which are AstroData instances
that represent a slice, or subset, of some other AstroData instance.

NOTE: if present, this option will override and obscure the 
\textless{}extInsts\textgreater{} argument, in other word \textless{}extInsts\textgreater{} will be ignored.

Example of sub-data:
\begin{quote}

sci\_subdata = ad{[}''SCI''{]}
\end{quote}

The sub-data is created by passing ``SCI'' as an argument to the
constructor. The `sci\_subdata' object would consist of its own 
`AstroData' instance referring to it's own \code{HDUList}, but the 
HDUs in this list would still be shared (in memory) with the `ad'
object, and appear in its \code{HDUList} as well.


\item {} 
\textbf{extInsts} (\emph{list of pyfits.HDU objects}) -- (advanced) A list of extensions this instance should 
contain, specified as actual pyfits.HDU instances. NOTE: if the 
`exts' argument is also set, \code{extInsts} is ignored.

\item {} 
\textbf{store} (\emph{string}) -- directory where a copy of the original file will be 
stored.  This is used in the special case where the
filename is an URL to a remote fits file.  Otherwise it has
no effect.

\item {} 
\textbf{mode} (\emph{string}) -- IO access mode, same as pyfits mode (``readonly'', ``update'',
or ``append'') with one additional AstroData-specific mode, ``new''.
If the mode is ``new'', and a filename is provided, the constructor
checks that the named file does not exist on disk,
and if it does not it creates an empty \code{AstroData} of that name 
but does not write it to disk. Such an \code{AstroData} 
instance is ready to have HDUs appended, and to be written to disk
at the user's command with \code{ad.write()}.

\end{itemize}

\end{description}\end{quote}
\index{data (astrodata.AstroData.AstroData attribute)}

\begin{fulllineitems}
\phantomsection\label{astro_class:astrodata.AstroData.AstroData.data}\pysigline{\bfcode{data}}
Property: The data property can only be used for single-HDU AstroData
instances, such as those returned during iteration. To set the 
data member, use \emph{ad.data = newdata}, where \emph{newdata} must be a 
numpy array. To get the data member, use \emph{npdata = ad.data}.

The ``data'' member returns appropriate HDU's data member(s) specifically
for the case in which the AstroData instance has ONE HDU (in 
addition to the PHU). This allows a single-extension AstroData, 
such as AstroData generates through iteration, to be used as though 
it simply is just the one extension. One is dealing with single 
extension AstroData instances when iterating over the AstroData 
extensions  and when picking out an extension by integer or tuple 
indexing. 
Eg.,
\begin{quote}
\begin{description}
\item[{for ad in dataset{[}SCI{]}:}] \leavevmode\begin{description}
\item[{\# ad is a single-HDU index}] \leavevmode
ad.data = newdata

\end{description}

\end{description}
\end{quote}
\begin{quote}\begin{description}
\item[{Returns}] \leavevmode
data array associated with the single extension

\item[{Return type}] \leavevmode
\textless{}ndarray\textgreater{}

\item[{Raises}] \leavevmode
Errors.SingleHDUMemberExcept

\end{description}\end{quote}

\end{fulllineitems}

\index{descriptors (astrodata.AstroData.AstroData attribute)}

\begin{fulllineitems}
\phantomsection\label{astro_class:astrodata.AstroData.AstroData.descriptors}\pysigline{\bfcode{descriptors}}
Property: Returns a dictionary of all registered metadata descriptor 
functions defined on the instance.

Eg.,

\{descriptor\_function\_name : descriptor value (dv)\}
\begin{quote}\begin{description}
\item[{Returns}] \leavevmode
dict of descriptor functions

\item[{Return type}] \leavevmode
\textless{}dict\textgreater{}

\end{description}\end{quote}

\end{fulllineitems}

\index{filename (astrodata.AstroData.AstroData attribute)}

\begin{fulllineitems}
\phantomsection\label{astro_class:astrodata.AstroData.AstroData.filename}\pysigline{\bfcode{filename}}
Property: `filename' is monitored so that the mode can be changed 
from `readonly' when `filename' is changed.

\end{fulllineitems}

\index{header (astrodata.AstroData.AstroData attribute)}

\begin{fulllineitems}
\phantomsection\label{astro_class:astrodata.AstroData.AstroData.header}\pysigline{\bfcode{header}}
Property: Returns the header member for Single-HDU AstroData instances.

The header property can only be used for single-HDU AstroData
instances, such as those returned during iteration. It is a
property attribute which uses \emph{get\_header(..)} and
\emph{set\_header(..)} to access the header member with the ``='' syntax.
To set the header member, use \emph{ad.header = newheader}, where
\emph{newheader} must be a pyfits.Header object. To get the header
member, use \emph{hduheader = ad.header}.
\begin{quote}\begin{description}
\item[{Returns}] \leavevmode
header

\item[{Return type}] \leavevmode
pyfits.Header

\item[{Raises}] \leavevmode
Errors.SingleHDUMemberExcept

\end{description}\end{quote}

\end{fulllineitems}

\index{headers (astrodata.AstroData.AstroData attribute)}

\begin{fulllineitems}
\phantomsection\label{astro_class:astrodata.AstroData.AstroData.headers}\pysigline{\bfcode{headers}}
Property: Returns header member(s) for all extension (except PHU).
\begin{quote}\begin{description}
\item[{Returns}] \leavevmode
list of pyfits.Header instances

\item[{Return type}] \leavevmode
\textless{}list\textgreater{}

\end{description}\end{quote}

\end{fulllineitems}

\index{hdulist (astrodata.AstroData.AstroData attribute)}

\begin{fulllineitems}
\phantomsection\label{astro_class:astrodata.AstroData.AstroData.hdulist}\pysigline{\bfcode{hdulist}}
Property: Returns a list of header-data units on the instance.
\begin{quote}\begin{description}
\item[{Returns}] \leavevmode
The AstroData's HDUList as returned by pyfits.open()

\item[{Return type}] \leavevmode
\textless{}pyfits.HDUList\textgreater{}

\end{description}\end{quote}

\end{fulllineitems}

\index{phu (astrodata.AstroData.AstroData attribute)}

\begin{fulllineitems}
\phantomsection\label{astro_class:astrodata.AstroData.AstroData.phu}\pysigline{\bfcode{phu}}
Property: Returns the instance's primary HDU.
\begin{quote}\begin{description}
\item[{Returns}] \leavevmode
The instance ``phu''

\item[{Return type}] \leavevmode
\textless{}PrimaryHDU\textgreater{}

\end{description}\end{quote}

\end{fulllineitems}

\index{types (astrodata.AstroData.AstroData attribute)}

\begin{fulllineitems}
\phantomsection\label{astro_class:astrodata.AstroData.AstroData.types}\pysigline{\bfcode{types}}
Property: Returns the composite list of AstroData classifications. I.e. 
the instance's qualified type and status classifications.
\begin{quote}\begin{description}
\item[{Returns}] \leavevmode
a list of types and status strings

\item[{Return type}] \leavevmode
\textless{}list\textgreater{}

\end{description}\end{quote}

\end{fulllineitems}

\index{\_\_getitem\_\_() (astrodata.AstroData.AstroData method)}

\begin{fulllineitems}
\phantomsection\label{astro_class:astrodata.AstroData.AstroData.__getitem__}\pysiglinewithargsret{\bfcode{\_\_getitem\_\_}}{\emph{ext}}{}
AstroData instances behave as list-like objects and therefore pythonic
slicing operations may be performed on instances of this class.
This method provides support for list slicing with the ``{[}{]}'' syntax.
Slicing is used to create AstroData objects associated with ``subdata'' 
of the parent AstroData object, that is, consisting of
an HDUList made up of some subset of the parent MEF.
\begin{quote}

E.g.,

\emph{datasetA = AstroData(dataset=''datasetMEF.fits'')}

\emph{datasetB = datasetA{[}'SCI'{]}}

\emph{datasetC = datasetA{[}2{]}}

\emph{datasetD = datasetA{[}(``SCI'',1){]}}

etc.
\end{quote}

In this case, after the operations, datasetB is an \code{AstroData} object
associated with the same MEF, sharing some of the the same actual HDUs
in memory as \code{datasetA}. The object in \code{datasetB} will behave as if
the SCI extensions are its only members, and it does in fact have its 
own pyfits.HDUList. Note that `datasetA' and `datasetB' share the 
PHU and also the data structures of the HDUs they have in common, so 
that a change to `datasetA{[}(`SCI',1){]}.data' will change the 
`datasetB{[}(`SCI',1){]}.data' member and vice versa. They are in fact both
references to the same numpy array in memory. The `HDUList' is a 
different list, however, that references common HDUs. If a subdata 
related `AstroData' object is written to disk, the resulting MEF will
contain only the extensions in the subdata's `HDUList'.

Note: Integer extensions start at 0 for the data-containing 
extensions, not at the PHU as with pyfits.  This is important:
`ad{[}0{]}' is the first content extension, in a traditional MEF 
perspective, the extension AFTER the PHU; it is not the PHU!  In
\code{AstroData} instances, the PHU is purely a header, and not counted
as an extension in the way that headers generally are not counted
as their own elements in the array they contain meta-data for.
The PHU can be accessed via the `phu' member.
\begin{quote}\begin{description}
\item[{Parameters}] \leavevmode
\textbf{ext} (\emph{\textless{}str\textgreater{}, \textless{}int\textgreater{}, or \textless{}tuple\textgreater{}}) -- Integer index, an index tuple (EXTNAME, EXTVER),
or EXTNAME name. If an int or tuple, the single
extension identified is wrapped with an AstroData instance,
and single-extension members of the AstroData object can 
be used. A string `EXTNAME' results in all extensions with 
the given EXTNAME wrapped by the new instance.

\item[{Returns}] \leavevmode
AstroData instance associated with the subset of data.

\item[{Return type}] \leavevmode
\textless{}AstroData\textgreater{}

\item[{Raises}] \leavevmode
KeyError, IndexError

\end{description}\end{quote}

\end{fulllineitems}

\index{append() (astrodata.AstroData.AstroData method)}

\begin{fulllineitems}
\phantomsection\label{astro_class:astrodata.AstroData.AstroData.append}\pysiglinewithargsret{\bfcode{append}}{\emph{moredata=None}, \emph{data=None}, \emph{header=None}, \emph{extname=None}, \emph{extver=None}, \emph{auto\_number=False}, \emph{do\_deepcopy=False}}{}
Appends header-data units (HDUs) to the AstroData instance.
\begin{quote}\begin{description}
\item[{Parameters}] \leavevmode\begin{itemize}
\item {} 
\textbf{moredata} (\emph{pyfits.HDU, pyfits.HDUList, or AstroData}) -- either an AstroData instance, an HDUList instance, 
or an HDU instance to add to this AstroData object.
When present, data and header arguments will be 
ignored.

\item {} 
\textbf{data} (\emph{numpy.ndarray}) -- `data' and `header' are used to construct a new HDU which
is then added to the \code{HDUList} associated to the 
AstroData instance. The `data' argument should be set to 
a valid numpy array. If `modedata' is not specified, 
`data' and `header' must both be set.

\item {} 
\textbf{header} (\emph{pyfits.Header}) -- `data' and `header' are used to construct a new 
HDU which is then added to the `HDUList' associated to 
AstroData instance. The `header' argument should be set 
to a valid pyfits.Header object.

\item {} 
\textbf{auto\_number} (\emph{\textless{}bool\textgreater{}}) -- auto-increment the extension version, `EXTVER', 
to fit file convention

\item {} 
\textbf{extname} (\emph{\textless{}str\textgreater{}}) -- extension name as set in keyword `EXTNAME' 
(eg. `SCI', `VAR', `DQ'). This is used only when 
`header' and `data' are used.

\item {} 
\textbf{extver} (\emph{\textless{}int\textgreater{}}) -- extension version as set in keyword `EXTVER'. This is 
used only when `header' and `data' are used.

\item {} 
\textbf{do\_deepcopy} (\emph{\textless{}bool\textgreater{}}) -- deepcopy the input before appending. May be useful
when auto\_number is True and the input comes from 
another AD object.

\end{itemize}

\end{description}\end{quote}

\end{fulllineitems}

\index{close() (astrodata.AstroData.AstroData method)}

\begin{fulllineitems}
\phantomsection\label{astro_class:astrodata.AstroData.AstroData.close}\pysiglinewithargsret{\bfcode{close}}{}{}
Method will close the `HDUList' on this instance.

\end{fulllineitems}

\index{count\_exts() (astrodata.AstroData.AstroData method)}

\begin{fulllineitems}
\phantomsection\label{astro_class:astrodata.AstroData.AstroData.count_exts}\pysiglinewithargsret{\bfcode{count\_exts}}{\emph{extname=None}}{}
The count\_exts() function returns the number of extensions matching the
passed \textless{}extname\textgreater{} (as stored in the HDUs ``EXTNAME'' header).
\begin{quote}\begin{description}
\item[{Parameters}] \leavevmode
\textbf{extname} (\emph{\textless{}str\textgreater{}}) -- the name of the extension, equivalent to the
value associated with the ``EXTNAME'' key in the extension
header.

\item[{Returns}] \leavevmode
number of \textless{}extname\textgreater{} extensions

\item[{Return type}] \leavevmode
\textless{}int\textgreater{}

\end{description}\end{quote}

\end{fulllineitems}

\index{ext\_index() (astrodata.AstroData.AstroData method)}

\begin{fulllineitems}
\phantomsection\label{astro_class:astrodata.AstroData.AstroData.ext_index}\pysiglinewithargsret{\bfcode{ext\_index}}{\emph{extension}, \emph{hduref=False}}{}
Takes an extension index, either an integer or (EXTNAME, EXTVER) 
tuple, and returns the index location of the extension.  If hduref is 
set to True, then the index returned is relative to the HDUList 
(0=PHU, 1=First non-PHU extension). If hduref is False (the default) 
then the index returned is relative to the AstroData numbering 
convention, where index=0 is the first extension in the MEF file.

\end{fulllineitems}

\index{get\_key\_value() (astrodata.AstroData.AstroData method)}

\begin{fulllineitems}
\phantomsection\label{astro_class:astrodata.AstroData.AstroData.get_key_value}\pysiglinewithargsret{\bfcode{get\_key\_value}}{\emph{key}}{}
The get\_key\_value() function is used to get the value associated
with a given key in the data-header unit of a single-HDU
AstroData instance (such as returned by iteration).
\begin{quote}\begin{description}
\item[{Note}] \leavevmode
Single extension AstroData objects are those with only a single
header-data unit besides the PHU.  They may exist if a single
extension file is loaded, but in general are produced by indexing or
iteration instructions, Eg.:
\begin{quote}

sead = ad{[}(``SCI'',1){]}
\begin{description}
\item[{for sead in ad{[}''SCI''{]}:}] \leavevmode
...

\end{description}
\end{quote}

The variable ``sead'' above is ensured to hold a single extension
AstroData object, and can be used more convieniently.

\item[{Parameters}] \leavevmode
\textbf{key} (\emph{\textless{}str\textgreater{} header keyword}) -- name of header keyword to set

\item[{Returns}] \leavevmode
header keyword value

\item[{Return type}] \leavevmode
\textless{}int\textgreater{}, or \textless{}float\textgreater{}, or \textless{}str\textgreater{}

\item[{Raises}] \leavevmode
SingleHDUMemberExcept

\end{description}\end{quote}

\end{fulllineitems}

\index{info() (astrodata.AstroData.AstroData method)}

\begin{fulllineitems}
\phantomsection\label{astro_class:astrodata.AstroData.AstroData.info}\pysiglinewithargsret{\bfcode{info}}{\emph{oid=False}, \emph{table=False}, \emph{help=False}}{}
Prints to stdout information about the phu and extensions found 
in the current instance.

\end{fulllineitems}

\index{insert() (astrodata.AstroData.AstroData method)}

\begin{fulllineitems}
\phantomsection\label{astro_class:astrodata.AstroData.AstroData.insert}\pysiglinewithargsret{\bfcode{insert}}{\emph{index}, \emph{moredata=None}, \emph{data=None}, \emph{header=None}, \emph{extname=None}, \emph{extver=None}, \emph{auto\_number=False}, \emph{do\_deepcopy=False}}{}
Insert a header-data unit (HDUs) into the AstroData instance.
\begin{quote}\begin{description}
\item[{Parameters}] \leavevmode\begin{itemize}
\item {} 
\textbf{index} (\emph{\textless{}int\textgreater{} or \textless{}tuple\textgreater{} (EXTNAME,EXTVER)}) -- the extension index, either an int or (EXTNAME, EXTVER)
pair before which the extension is to be inserted.
Note: the first data extension is {[}0{]}; cannot insert
before the PHU. `index' is the  Astrodata index, where
0 is the 1st extension.

\item {} 
\textbf{moredata} (\emph{pyfits.HDU, pyfits.HDUList, or AstroData}) -- An AstroData instance, an HDUList instance, or
an HDU instance. When present, data and header will be
ignored.

\item {} 
\textbf{data} (\emph{numpy.ndarray}) -- `data' and `header' are used in conjunction to construct a
new HDU which is then added to the HDUList of the AstroData
instance. `data' should be set to a valid numpy array. 
If `modedata' is not specified, `data' and `header' both
must be set.

\item {} 
\textbf{header} (\emph{pyfits.Header}) -- `data' and `header' are used in conjunction to construct
a new HDU which is then added to the HDUList of the
instance. The `header' argument should be set to a valid
pyfits.Header object. If `moredata' is not specified,
`data' and `header' both must be set.

\item {} 
\textbf{extname} (\emph{\textless{}str\textgreater{}}) -- extension name (eg. `SCI', `VAR', `DQ')

\item {} 
\textbf{extver} (\emph{\textless{}int\textgreater{}}) -- extension version (eg. 1, 2, 3)

\item {} 
\textbf{auto\_number} (\emph{\textless{}bool\textgreater{}}) -- auto-increment the extension version, `EXTVER',
to fit file convention. If set to True, this will
override the `extver' and `extname' arguments
settings.

\item {} 
\textbf{do\_deepcopy} (\emph{\textless{}bool\textgreater{}}) -- deepcopy the input before appending. May be useful
when auto\_number is True and the input comes from
another AD object.

\end{itemize}

\end{description}\end{quote}

\end{fulllineitems}

\index{open() (astrodata.AstroData.AstroData method)}

\begin{fulllineitems}
\phantomsection\label{astro_class:astrodata.AstroData.AstroData.open}\pysiglinewithargsret{\bfcode{open}}{\emph{source}, \emph{mode='readonly'}}{}
Method wraps a source dataset, which can be in memory as another
AstroData or pyfits HDUList, or on disk, given as the string filename.

NOTE: In general, users should not use `open' directly, but pass
the filename to the AstroData constructor. The constructor uses
open(..) however. Users should use the constructor, which may 
perform extra operations.
\begin{quote}\begin{description}
\item[{Parameters}] \leavevmode\begin{itemize}
\item {} 
\textbf{source} (\emph{\textless{}str\textgreater{} \textbar{} \textless{}AstroData\textgreater{} \textbar{} \textless{}pyfits.HDUList\textgreater{}}) -- source contains some reference for the dataset to 
be opened and associated with this instance. Generally
it would be a filename, but can also be
an AstroData instance or a pyfits.HDUList instance.

\item {} 
\textbf{mode} (\emph{\textless{}str\textgreater{}}) -- IO access mode, same as the pyfits open mode, `readonly,
`update', or `append'.  The mode is passed to pyfits so
if it is an illegal mode name, pyfits will be the
subsystem reporting the error.

\end{itemize}

\end{description}\end{quote}

\end{fulllineitems}

\index{phu\_get\_key\_value() (astrodata.AstroData.AstroData method)}

\begin{fulllineitems}
\phantomsection\label{astro_class:astrodata.AstroData.AstroData.phu_get_key_value}\pysiglinewithargsret{\bfcode{phu\_get\_key\_value}}{\emph{key}}{}
The phu\_get\_key\_value(..) function returns the value associated 
with the given key within the primary header unit of the dataset.
The value is returned as a string (storage format) and must be 
converted as necessary by the caller.
\begin{quote}\begin{description}
\item[{Parameters}] \leavevmode
\textbf{key} (\emph{\textless{}str\textgreater{}}) -- name of header value to retrieve

\item[{Returns}] \leavevmode
keyword value as string or None if not present.

\item[{Return type}] \leavevmode
\textless{}str\textgreater{}

\end{description}\end{quote}

\end{fulllineitems}

\index{phu\_set\_key\_value() (astrodata.AstroData.AstroData method)}

\begin{fulllineitems}
\phantomsection\label{astro_class:astrodata.AstroData.AstroData.phu_set_key_value}\pysiglinewithargsret{\bfcode{phu\_set\_key\_value}}{\emph{keyword=None}, \emph{value=None}, \emph{comment=None}}{}
Add or update a keyword in the PHU of the AstroData object with a
specific value and, optionally, a comment
\begin{quote}\begin{description}
\item[{Parameters}] \leavevmode\begin{itemize}
\item {} 
\textbf{keyword} (\emph{\textless{}str\textgreater{}}) -- Name of the keyword to add or update in the PHU

\item {} 
\textbf{value} (\emph{\textless{}int\textgreater{}, \textless{}float\textgreater{}, or \textless{}str\textgreater{}}) -- Value of the keyword to add or update in the PHU

\item {} 
\textbf{comment} (\emph{string}) -- Comment of the keyword to add or update in the PHU

\end{itemize}

\end{description}\end{quote}

\end{fulllineitems}

\index{remove() (astrodata.AstroData.AstroData method)}

\begin{fulllineitems}
\phantomsection\label{astro_class:astrodata.AstroData.AstroData.remove}\pysiglinewithargsret{\bfcode{remove}}{\emph{index}, \emph{hdui=False}}{}~\begin{quote}\begin{description}
\item[{Parameters}] \leavevmode
\textbf{index} (\emph{\textless{}int\textgreater{}, or \textless{}tuple\textgreater{} (EXTNAME,EXTVER)}) -- the extension index, either an int or (EXTNAME, EXTVER)
pair before which the extension is to be removed.
Note: the first data extension is {[}0{]}, you cannot remove 
before the PHU. Index always refers to Astrodata Numbering 
system, 0 = HDU

\end{description}\end{quote}

\end{fulllineitems}

\index{rename\_ext() (astrodata.AstroData.AstroData method)}

\begin{fulllineitems}
\phantomsection\label{astro_class:astrodata.AstroData.AstroData.rename_ext}\pysiglinewithargsret{\bfcode{rename\_ext}}{\emph{name}, \emph{ver=None}, \emph{force=True}}{}
The rename\_ext(..) function is used in order to rename an 
HDU with a new EXTNAME and EXTVER identifier.  Merely changing 
the EXTNAME and EXTVER values in the extensions pyfits.Header 
is not sufficient. Though the values change in the pyfits.Header 
object, there are special HDU class members which are not updated.
\begin{quote}\begin{description}
\item[{Warning}] \leavevmode
This function manipulates private (or somewhat private) 
HDU members, specifically `name' and `\_extver'. STSCI 
has been informed of the issue and has made a special 
HDU function for performing the renaming. 
When generally available, this new function will be used 
instead of manipulating the  HDU's properties directly, 
and this function will call the new pyfits.HDUList(..) 
function.

\item[{Note}] \leavevmode
Works only on single extension instances.

\item[{Parameters}] \leavevmode\begin{itemize}
\item {} 
\textbf{name} (\emph{\textless{}str\textgreater{}}) -- New `EXTNAME' for the given extension.

\item {} 
\textbf{ver} (\emph{\textless{}int\textgreater{}}) -- New `EXTVER' for the given extension

\item {} 
\textbf{force} (\emph{\textless{}bool\textgreater{}}) -- Will update even on subdata, or shared hdulist.
Default=True

\end{itemize}

\end{description}\end{quote}

\end{fulllineitems}

\index{set\_key\_value() (astrodata.AstroData.AstroData method)}

\begin{fulllineitems}
\phantomsection\label{astro_class:astrodata.AstroData.AstroData.set_key_value}\pysiglinewithargsret{\bfcode{set\_key\_value}}{\emph{key}, \emph{value}, \emph{comment=None}}{}
The set\_key\_value() function is used to set the value (and optionally
the comment) associated with a given key in the data-header of a 
single-HDU AstroData instance. The value argument will be converted to 
string, so it must have a string operator member function or be passed 
in as string.
\begin{quote}\begin{description}
\item[{Note}] \leavevmode
Single extension AstroData objects are those with only a single
header-data unit besides the PHU.  They may exist if a single
extension file is loaded, but in general are produced by indexing 
or iteration instructions.Eg.:
\begin{quote}

sead = ad{[}(``SCI'',1){]}
\begin{description}
\item[{for sead in ad{[}''SCI''{]}:}] \leavevmode
...

\end{description}
\end{quote}

The variable ``sead'' above is ensured to hold a single extension
AstroData object, and can be used more convieniently.

\item[{Parameters}] \leavevmode\begin{itemize}
\item {} 
\textbf{key} (\emph{\textless{}str\textgreater{}}) -- header keyword

\item {} 
\textbf{value} (\emph{\textless{}int\textgreater{}, or \textless{}float\textgreater{}, or \textless{}str\textgreater{}}) -- header keyword value

\item {} 
\textbf{comment} (\emph{\textless{}str\textgreater{}}) -- header keyword comment

\end{itemize}

\end{description}\end{quote}

\end{fulllineitems}

\index{status() (astrodata.AstroData.AstroData method)}

\begin{fulllineitems}
\phantomsection\label{astro_class:astrodata.AstroData.AstroData.status}\pysiglinewithargsret{\bfcode{status}}{\emph{prune=False}}{}
Returns the set of `status' classifications, which are those that 
tend to change during the reduction of a dataset based on 
the amount of processing, e.g. RAW vs PREPARED.  Strictly, a `status' 
type is any type defined in or below the status part of the 
`classification' directory within the configuration package. For 
example, in the Gemini type configuration this means any type definition
files in or below the `astrodata\_Gemini/ADCONFIG/classification/status'
directory.
\begin{quote}\begin{description}
\item[{Parameters}] \leavevmode
\textbf{prune} (\emph{\textless{}bool\textgreater{}}) -- flag which controls `pruning' the returned type list 
so that only the leaf node type for a given set of 
related status types is returned.

\item[{Returns}] \leavevmode
list of classification names

\item[{Return type}] \leavevmode
\textless{}list\textgreater{} of strings

\end{description}\end{quote}

\end{fulllineitems}

\index{store\_original\_name() (astrodata.AstroData.AstroData method)}

\begin{fulllineitems}
\phantomsection\label{astro_class:astrodata.AstroData.AstroData.store_original_name}\pysiglinewithargsret{\bfcode{store\_original\_name}}{}{}
Method adds the key `ORIGNAME' to PHU of an astrodata object 
containing the filename when object was instantiated (without any 
directory info, ie. the basename).

If key has all ready been added (ie. has undergone processing where
store\_original\_name was performed before), then the value original 
filename is just returned.  If the key is there, but does not match
the original filename of the object, then the original name is 
returned, NOT the value in the PHU. The value in the PHU can always be
found using ad.phu\_get\_key\_value(`ORIGNAME').

\end{fulllineitems}

\index{type() (astrodata.AstroData.AstroData method)}

\begin{fulllineitems}
\phantomsection\label{astro_class:astrodata.AstroData.AstroData.type}\pysiglinewithargsret{\bfcode{type}}{\emph{prune=False}}{}
Returns a list of type classifications. It is possible to `prune' 
the list so that only leaf nodes are returned, which is 
useful when leaf nodes take precedence such as for descriptors.

Note: types consist of a hierarchical tree of dataset types.
This latter tree maps roughly to instrument-modes, with instrument 
types branching from the general observatory type, (e.g. `GEMINI').

Currently the distinction betwen status and type is not used by the
system (e.g. in type-specific default recipe assignments) and is
provided as a service for higher level code, e.g. primitives and
scripts which make use of the distinction.
\begin{quote}\begin{description}
\item[{Parameters}] \leavevmode
\textbf{prune} (\emph{\textless{}bool\textgreater{}}) -- flag which controls `pruning' the returned type list 
so that only the leaf node type for a given set of 
related types is returned.

\item[{Returns}] \leavevmode
list of classification names

\item[{Return type}] \leavevmode
\textless{}list\textgreater{} of strings

\end{description}\end{quote}

\end{fulllineitems}

\index{write() (astrodata.AstroData.AstroData method)}

\begin{fulllineitems}
\phantomsection\label{astro_class:astrodata.AstroData.AstroData.write}\pysiglinewithargsret{\bfcode{write}}{\emph{filename=None}, \emph{clobber=False}, \emph{rename=None}, \emph{prefix=None}, \emph{suffix=None}}{}
The write method acts similarly to the `pyfits HDUList.writeto(..)'
function if a filename is given, or like `pyfits.HDUList.update(..)' if 
no name is given, using whatever the current name is set to. When a name
is given, this becomes the new name of the \code{AstroData} object and
will be used on subsequent calls to  write for which a filename is not
provided. If the \code{clobber} flag is \code{False} (the default) then 
`write(..)' throws an exception if the file already exists.
\begin{quote}\begin{description}
\item[{Parameters}] \leavevmode\begin{itemize}
\item {} 
\textbf{filename} (\emph{\textless{}str\textgreater{}}) -- name of the file to write to. Optional if the instance
already has a filename defined, which might not be the 
case for new AstroData instances created in memory.

\item {} 
\textbf{clobber} (\emph{\textless{}bool\textgreater{}}) -- This flag drives if AstroData will overwrite an existing
file.

\item {} 
\textbf{rename} (\emph{\textless{}bool\textgreater{}}) -- This flag allows you to write the AstroData instance to
a new filename, but leave the `current' name in memory.

\item {} 
\textbf{prefix} (\emph{\textless{}str\textgreater{}}) -- Add a prefix to \code{filename}.

\item {} 
\textbf{suffix} (\emph{\textless{}str\textgreater{}}) -- Add a suffix to \code{filename}.

\end{itemize}

\end{description}\end{quote}

\end{fulllineitems}


\end{fulllineitems}



\chapter{Indices and tables}
\label{index:indices-and-tables}\begin{itemize}
\item {} 
\emph{genindex}

\item {} 
\emph{modindex}

\item {} 
\emph{search}

\end{itemize}


\renewcommand{\indexname}{Python Module Index}
\begin{theindex}
\def\bigletter#1{{\Large\sffamily#1}\nopagebreak\vspace{1mm}}
\bigletter{a}
\item {\texttt{astrodata.AstroData}}, \pageref{astro_class:module-astrodata.AstroData}
\end{theindex}

\renewcommand{\indexname}{Index}
\printindex
\end{document}
