<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>3. AstroDataTypes &mdash; AstroData Users Manual X1.0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/todo-styles.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     'X1.0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="AstroData Users Manual X1.0.1 documentation" href="index.html" />
    <link rel="next" title="4. FITS Headers" href="headers.html" />
    <link rel="prev" title="2. MEF Input/Output Operations and Extensions Manipulation" href="io.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="headers.html" title="4. FITS Headers"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="io.html" title="2. MEF Input/Output Operations and Extensions Manipulation"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">AstroData Users Manual X1.0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="astrodatatypes">
<span id="types"></span><h1>3. AstroDataTypes<a class="headerlink" href="#astrodatatypes" title="Permalink to this headline">¶</a></h1>
<div class="section" id="what-are-astrodatatypes">
<h2>3.1. What are AstroDataTypes<a class="headerlink" href="#what-are-astrodatatypes" title="Permalink to this headline">¶</a></h2>
<p>AstroDataTypes are AstroData&#8217;s way to know about itself.  When a file is
opened with AstroData, the headers are inspected, data identification rules
are applied, and all applicable AstroDataTypes are assigned.  From that point
on, the AstroData object &#8220;knows&#8221; whether it is a GMOS image, a NIRI spectrum,
an IFU from GMOS or NIFS. This embedded knowledge is critical to the header
keyword mapping done by the Descriptors (see
<a class="reference internal" href="headers.html#headers"><em>Section 4 - FITS Headers</em></a>), for examples.
The RecipeSystem also depends heavily on the AstroDataType feature.</p>
<p>Examples of AstroDataTypes are: GMOS_IMAGE, SIDEREAL, GMOS_IFU_FLAT, NIRI_CAL,
NIRI_SPECT, GEMINI_SOUTH, etc.</p>
<p>The AstroDataTypes can also refer to data processing status, eg. RAW.  This
feature is not used as much yet.</p>
<p>The types are obviously observatory and instrument dependent.  The
identification rules do need to be coded for AstroData to assign
AstroDataTypes.  This has been done for most if not all Gemini data.  The
Gemini Types are included in the <tt class="docutils literal"><span class="pre">astrodata_Gemini</span></tt> package that is
installed along with <tt class="docutils literal"><span class="pre">astrodata</span></tt> when <tt class="docutils literal"><span class="pre">gemini_python</span></tt> is installed.
Keeping the instrument rules and configuration separate from <tt class="docutils literal"><span class="pre">astrodata</span></tt>
keeps it generic, and allows other packages to be easily added, for example,
one might want to add a third-party package for CFHT instruments.</p>
</div>
<div class="section" id="using-astrodatatypes">
<h2>3.2. Using AstroDataTypes<a class="headerlink" href="#using-astrodatatypes" title="Permalink to this headline">¶</a></h2>
<p><strong>Try it yourself</strong></p>
<p>If you wish to follow along and try the commands yourself, download
the data package, go to the <tt class="docutils literal"><span class="pre">playground</span></tt> directory and copy over
the necessary files.</p>
<div class="highlight-python"><div class="highlight"><pre>cd &lt;path&gt;/gemini_python_datapkg-X1/playground
cp ../data_for_ad_user_manual/N20111124S0203.fits .
</pre></div>
</div>
<p>Then launch the Python shell:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">python</span>
</pre></div>
</div>
<p>The attribute <tt class="docutils literal"><span class="pre">types</span></tt> is a common way to check the AstroDataType and make
logic decisions based to on the type.</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">astrodata</span> <span class="kn">import</span> <span class="n">AstroData</span>

<span class="n">ad</span> <span class="o">=</span> <span class="n">AstroData</span><span class="p">(</span><span class="s">&#39;N20111124S0203.fits&#39;</span><span class="p">)</span>

<span class="k">if</span> <span class="s">&#39;GMOS_IMAGE&#39;</span> <span class="ow">in</span> <span class="n">ad</span><span class="o">.</span><span class="n">types</span><span class="p">:</span>
   <span class="k">print</span> <span class="s">&quot;I am a GMOS Image.&quot;</span>
<span class="k">else</span><span class="p">:</span>
   <span class="k">print</span> <span class="s">&quot;I am these types instead: &quot;</span><span class="p">,</span> <span class="n">ad</span><span class="o">.</span><span class="n">types</span>
</pre></div>
</td></tr></table></div>
<p>The attribute <tt class="docutils literal"><span class="pre">types</span></tt> is a list of all the AstroDataTypes
associated with the dataset.  Other than for controlling the flow of the
program, it can be useful when interactively exploring the various types
associated with a dataset, or when there&#8217;s a need to write all the types
to the screen or to a file, for logging purposes, for example.</p>
<p>If you have a set of Gemini datasets on disk and you wish to know which
AstroDataTypes are associated with them, use the shell tool <tt class="docutils literal"><span class="pre">typewalk</span></tt>
in that directory and you will be served a complete list of types for each
datasets in that directory.  Try it in the <tt class="docutils literal"><span class="pre">data_for_ad_user_manual</span></tt>
directory.  Open another shell (not the interactive Python shell) and</p>
<div class="highlight-python"><div class="highlight"><pre>cd &lt;path&gt;/gemini_python_datapkg-X1/data_for_ad_user_manual
typewalk
</pre></div>
</div>
<p>You will get:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></div></td><td class="code"><div class="highlight"><pre>directory: /data/giraf/gemini_python_datapkg-X1/data_for_ad_user_manual
     estgsS20080220S0078.fits .......... (GEMINI) (GEMINI_SOUTH) (GMOS)
     ................................... (GMOS_LS) (GMOS_S) (GMOS_SPECT) (LS)
     ................................... (PREPARED) (SIDEREAL) (SPECT)
     gmosifu_cube.fits ................. (GEMINI) (GEMINI_SOUTH) (GMOS)
     ................................... (GMOS_IFU) (GMOS_IFU_BLUE)
     ................................... (GMOS_IFU_RED) (GMOS_IFU_TWO)
     ................................... (GMOS_S) (GMOS_SPECT) (IFU)
     ................................... (PREPARED) (SIDEREAL) (SPECT)
     N20110313S0188.fits ............... (GEMINI) (GEMINI_NORTH) (GMOS)
     ................................... (GMOS_IMAGE) (GMOS_N) (GMOS_RAW)
     ................................... (IMAGE) (RAW) (SIDEREAL) (UNPREPARED)
     N20110316S0321.fits ............... (CAL) (GEMINI) (GEMINI_NORTH) (GMOS)
     ................................... (GMOS_CAL) (GMOS_IMAGE)
     ................................... (GMOS_IMAGE_FLAT)
     ................................... (GMOS_IMAGE_TWILIGHT) (GMOS_N)
     ................................... (GMOS_RAW) (IMAGE) (RAW) (SIDEREAL)
     ................................... (UNPREPARED)
     N20111124S0203.fits ............... (CAL) (GEMINI) (GEMINI_NORTH) (GMOS)
     ................................... (GMOS_CAL) (GMOS_IFU) (GMOS_IFU_FLAT)
     ................................... (GMOS_IFU_RED) (GMOS_N) (GMOS_RAW)
     ................................... (GMOS_SPECT) (IFU) (RAW) (SIDEREAL)
     ................................... (SPECT) (UNPREPARED)
</pre></div>
</td></tr></table></div>
<p>The attribute <tt class="docutils literal"><span class="pre">types</span></tt> returns all the processing status flags as well as
the types proper.  Those two concepts can be separated.  The method <tt class="docutils literal"><span class="pre">type()</span></tt>
returns only types, no status; the method <tt class="docutils literal"><span class="pre">status()</span></tt> returns only processing
status, no types.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ad</span><span class="o">.</span><span class="n">type</span><span class="p">()</span>
<span class="n">ad</span><span class="o">.</span><span class="n">status</span><span class="p">()</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">type()</span></tt> statement returns:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="s">&#39;GMOS_IFU&#39;</span><span class="p">,</span> <span class="s">&#39;GMOS_IFU_RED&#39;</span><span class="p">,</span> <span class="s">&#39;IFU&#39;</span><span class="p">,</span> <span class="s">&#39;GEMINI_NORTH&#39;</span><span class="p">,</span> <span class="s">&#39;GMOS_N&#39;</span><span class="p">,</span>
<span class="s">&#39;GMOS_IFU_FLAT&#39;</span><span class="p">,</span> <span class="s">&#39;GMOS_CAL&#39;</span><span class="p">,</span> <span class="s">&#39;GEMINI&#39;</span><span class="p">,</span> <span class="s">&#39;SIDEREAL&#39;</span><span class="p">,</span> <span class="s">&#39;GMOS_SPECT&#39;</span><span class="p">,</span>
<span class="s">&#39;CAL&#39;</span><span class="p">,</span> <span class="s">&#39;GMOS&#39;</span><span class="p">,</span> <span class="s">&#39;SPECT&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>and the <tt class="docutils literal"><span class="pre">status()</span></tt> statement returns:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="s">&#39;GMOS_RAW&#39;</span><span class="p">,</span> <span class="s">&#39;UNPREPARED&#39;</span><span class="p">,</span> <span class="s">&#39;RAW&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>If code applies modifications to the AstroData object that result in changes to
the AstroDataTypes, it is necessary to let the system know about it.  The
method <tt class="docutils literal"><span class="pre">refresh_types()</span></tt> rescan the AstroData headers and reapply the
identification rules.  This type refreshing is used mostly when the processing
status needs to be changed, for example once the raw data has been
standardized, it&#8217;s processing status becomes &#8220;PREPARED&#8221;.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ad</span><span class="o">.</span><span class="n">refresh_types</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="creating-new-astrodatatypes-advanced-topic">
<h2>3.3. Creating New AstroDataTypes [Advanced Topic]<a class="headerlink" href="#creating-new-astrodatatypes-advanced-topic" title="Permalink to this headline">¶</a></h2>
<div class="admonition-todo admonition" id="index-0">
<p class="first admonition-title">Todo</p>
<p class="last">Primer on creating new AstroDataTypes.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">refer to programmer&#8217;s manual, but give some idea of what needs to be done
and the basic principles</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">3. AstroDataTypes</a><ul>
<li><a class="reference internal" href="#what-are-astrodatatypes">3.1. What are AstroDataTypes</a></li>
<li><a class="reference internal" href="#using-astrodatatypes">3.2. Using AstroDataTypes</a></li>
<li><a class="reference internal" href="#creating-new-astrodatatypes-advanced-topic">3.3. Creating New AstroDataTypes [Advanced Topic]</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="io.html"
                        title="previous chapter">2. MEF Input/Output Operations and Extensions Manipulation</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="headers.html"
                        title="next chapter">4. FITS Headers</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/types.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="headers.html" title="4. FITS Headers"
             >next</a> |</li>
        <li class="right" >
          <a href="io.html" title="2. MEF Input/Output Operations and Extensions Manipulation"
             >previous</a> |</li>
        <li><a href="index.html">AstroData Users Manual X1.0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, Kathleen Labrie.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>